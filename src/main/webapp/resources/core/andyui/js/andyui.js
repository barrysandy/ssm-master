(function(window){"use strict";var module={},BROWSER;module.UI_ATTR=["an-tabs","an-accordion","an-datagrid","an-combo","an-spinner","an-related","an-datagridPagination"];module.UI_LAYOUT=["g-layout","g-max","g-h-max","g-w-max"];module.UI_PERFORM=["u-switch"];module.EVENT_CLICK="andy_click";module.COMBO_CHOOSE_LISET="combo_choose_list";module.SETTIME_01=100;module.SETTIME_02=200;module.LAYOUT_IE6=true;module.setZindex=function(e,t){$(e).css("z-index",t)};module.getBrowser=function(){var e=(navigator.platform||"").toLowerCase(),t=navigator.userAgent.toLowerCase(),a;if(BROWSER){return BROWSER}BROWSER={};function n(e,t){e=(""+e).replace(/_/g,".");t=t||1;e=String(e).split(".");e=e[0]+"."+(e[1]||"0");e=Number(e).toFixed(t);return e}function i(e,t,a){e=BROWSER[e];e.name=t;e.version=a;e[t]=a}var r=BROWSER.platform={name:window.orientation!=undefined?"iPod":(e.match(/mac|win|linux/i)||["unknown"])[0],version:0,iPod:0,iPad:0,iPhone:0,android:0,win:0,linux:0,mac:0};(a=t.match(/windows ([\d.]+)/))?i("platform","win",n(a[1])):(a=t.match(/windows nt ([\d.]+)/))?i("platform","win",n(a[1])):(a=t.match(/linux ([\d.]+)/))?i("platform","linux",n(a[1])):(a=t.match(/mac ([\d.]+)/))?i("platform","mac",n(a[1])):(a=t.match(/ipod ([\d.]+)/))?i("platform","iPod",n(a[1])):(a=t.match(/ipad[\D]*os ([\d_]+)/))?i("platform","iPad",n(a[1])):(a=t.match(/iphone ([\d.]+)/))?i("platform","iPhone",n(a[1])):(a=t.match(/android ([\d.]+)/))?i("platform","android",n(a[1])):0;var o=BROWSER.browser={name:"unknown",version:0,ie:0,firefox:0,chrome:0,opera:0,safari:0,mobileSafari:0,adobeAir:0};(a=t.match(/trident.*; rv\:([\d.]+)/))?i("browser","ie",n(a[1])):(a=t.match(/msie ([\d.]+)/))?i("browser","ie",n(a[1])):(a=t.match(/firefox\/([\d.]+)/))?i("browser","firefox",n(a[1])):(a=t.match(/chrome\/([\d.]+)/))?i("browser","chrome",n(a[1])):(a=t.match(/opera.([\d.]+)/))?i("browser","opera",n(a[1])):(a=t.match(/adobeair\/([\d.]+)/))?i("browser","adobeAir",n(a[1])):(a=t.match(/version\/([\d.]+).*safari/))?i("browser","safari",n(a[1])):0;(a=t.match(/version\/([\d.]+).*mobile.*safari/))?i("browser","mobileSafari",n(a[1])):0;if(r.iPad){i("browser","mobileSafari","0.0")}if(o.ie){if(!document.documentMode){document.documentMode=Math.floor(o.ie)}else if(document.documentMode!==Math.floor(o.ie)){i("browser","ie",n(document.documentMode))}}BROWSER.engine={name:"unknown",version:0,trident:0,gecko:0,webkit:0,presto:0};(a=t.match(/trident\/([\d.]+)/))?i("engine","trident",n(a[1])):(a=t.match(/gecko\/([\d.]+)/))?i("engine","gecko",n(a[1])):(a=t.match(/applewebkit\/([\d.]+)/))?i("engine","webkit",n(a[1])):(a=t.match(/presto\/([\d.]+)/))?i("engine","presto",n(a[1])):0;if(BROWSER.browser.ie){if(BROWSER.browser.ie==6){i("engine","trident",n("4"))}else if(o.ie==7||o.ie==8){i("engine","trident",n("5"))}}return BROWSER};module.getBrowser();module.IE=function(){var e=BROWSER.browser.ie;var t=parseInt(e,10);return t};module.isChrome=function(){return BROWSER.browser.name==="chrome"};module.floatbox=function(e){if(e.is(".top")){if(e.is(":hidden")){e.show();var t=e.outerHeight();e.css("top",0-t-5+"px").animate({top:"0px"},300)}else{var t=e.outerHeight();e.animate({top:0-t-5+"px"},300,function(){e.hide()})}}if(e.is(".bottom")){if(e.is(":hidden")){e.show();var t=e.outerHeight();e.css("bottom",0-t-5+"px").animate({bottom:"0px"},300)}else{var t=e.outerHeight();e.animate({bottom:0-t-5+"px"},300,function(){e.hide()})}}if(e.is(".left")){if(e.is(":hidden")){e.show();var a=e.outerWidth();e.css("left",0-t-5+"px").animate({left:"0px"},300)}else{var t=e.outerWidth();e.animate({left:0-t-5+"px"},300,function(){e.hide()})}}if(e.is(".right")){if(e.is(":hidden")){e.show();var a=e.outerWidth();e.css("right",0-t-5+"px").animate({right:"0px"},300)}else{var t=e.outerWidth();e.animate({right:0-t-5+"px"},300,function(){e.hide()})}}};module.floatact=function(){$("[an-float]").each(function(e,t){var a=$(this).attr("option");if(a=="click"){$(this).click(function(){andy.floatbox($(this))})}else if(a=="leave"){$(this).on("mouseleave",function(){andy.floatbox($(this))})}})};module.destroyIframe=function(e){var t,a;try{if(e.contentWindow&&e.contentWindow.$){a=e.contentWindow.$("iframe")}else{a=e.contentWindow.document.getElementsByTagName("iframe")}if(a.length>0){for(t=0;t<a.length;t++){module.destroyIframe(a[t])}}e.src="about:blank";e.contentWindow.document.write("");e.contentWindow.document.clear()}catch(n){}e.parentNode.removeChild(e)};module.fullscreen=module.an_fullscreen=function(){var e=function(){var e=new ActiveXObject("WScript.Shell");if(e!=null){e.SendKeys("{F11}")}};var t=function(e){if(e.requestFullscreen){e.requestFullscreen()}else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else if(e.webkitRequestFullscreen){e.webkitRequestFullscreen()}else if(e.msRequestFullscreen){e.msRequestFullscreen()}};if(!!window.ActiveXObject||"ActiveXObject"in window){e()}else{t(window.top.document.documentElement)}};module.exitFullscreen=function(){var e=function(){var e=new ActiveXObject("WScript.Shell");if(e!=null){e.SendKeys("{F11}")}};var t=function(){if(window.top.document.exitFullscreen){window.top.document.exitFullscreen()}else if(window.top.document.mozCancelFullScreen){window.top.document.mozCancelFullScreen()}else if(window.top.document.webkitExitFullscreen){window.top.document.webkitExitFullscreen()}};if(!!window.ActiveXObject||"ActiveXObject"in window){e()}else{t()}};module.enter=function(e,t){var e=e==undefined?document:e;$(e).keydown(function(){if(event.keyCode==13){t()}})};module.unEnter=function(e){$(e).off("keydown")};module.loaddata=function(e,t,a){var n;if(arguments.length===2){a=t;t=undefined}if(e.indexOf("{")>0||e.indexOf("[")>0){n=module.stringToJson(e);a(n);return}$.get(e,t,function(t,n){if(n=="success"){a(t)}else{console.log(e+"|load data is failure!")}}).error(function(e){a(false,e)})};module.postdata=function(e,t,a){if(arguments.length===2){a=t;t=undefined}$.post(e,t,function(t,n){if(n=="success"){a(t)}else{console.log(e+"|load data is failure!")}})};module.stringToJson=function(string){var data=string;if(typeof data=="string"){data=eval("("+data+")")}return data};module.copy=function(e,t){if($("#copytextarea").length==0){$("body").append("<textarea id='copytextarea' style='height:0; border:0; width:0; display:block; opacity:0'></textarea>")}var a=$("#copytextarea");a.text(e);a.select();document.execCommand("Copy");alert(t)};module.scrollbar=function(){$(".scrollbar").each(function(e,t){var a=$(this).height(),n=$(this).width();$(this).mCustomScrollbar({setWidth:n,setHeight:a,axis:"y",scrollbarPosition:"inside",autoDraggerLength:true,autoHideScrollbar:true,autoExpandScrollbar:true,alwaysShowScrollbar:0,mouseWheel:{enable:true},keyboard:{enable:true},theme:"minimal-dark",scrollInertia:800,live:"on"})})};module.img=function(){$("img[src='#']").each(function(e,t){var a=$(this).width(),n=$(this).height();if($(this).attr("title")==""||$(this).attr("title")==undefined){var i=""}else{var i=$(this).attr("title")+" "}$(this).removeAttr("src").attr("data-src","holder.js/"+a+"x"+n+"?font=Lucida Family&text="+i+a+"×"+n)})};module.url=function(e,t){if(t=="top"){top.location=e}else if(t=="self"){self.location=e}else{window.top.contentWindow.find(t).attr("src",e)}};module.dataurl=function(){$("[data-url]").each(function(){var e=$(this).attr("data-url");var t=$(this).attr("data-callback");$(this).load(e,t)})};module.a=function(){$("[href='#']").each(function(e,t){$(this).attr("href","javascript:void(0)")})};module.checked=function(){$(".an_checkbox").each(function(e,t){var a=$(t),n=a.attr("title"),i="";if(a.attr("type")=="checkbox"&&a.hasClass("switch")==false){i='<label class="i-checks"></label>'}else if(a.attr("type")=="radio"){i='<label class="i-checks"></label>'}else if(a.attr("type")=="checkbox"&&a.hasClass("switch")){i='<label class="i-switch m-r-sm"></label>';n='<span class="textmax">'+a.attr("title")+"</span>"}if(a.parent().is("label")){return false}else{a.wrap(i);a.after(" <i></i>"+n)}var r=a.parent();if(a.hasClass("checkbox-inline")){r.addClass("checkbox-inline")}})};module.getRandom=function(e){return Math.floor(Math.random()*e+1)};module.getRandomColor=function(){return"#"+("00000"+(Math.random()*16777215+.5>>0).toString(16)).slice(-6)};module.isSimilarColor=function(e,t,a){this.offsetNum=Math.abs(a);this.offsetNum>255?this.offsetNum=this.offsetNum-256:"";var n=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];var i=[parseInt(t.substring(1,3),16),parseInt(t.substring(3,5),16),parseInt(t.substring(5,7),16)];for(var r=0;r<n.length;r++){if(Math.abs(n[r]-i[r])>this.offsetNum){return false}}return true};module.closesearch=function(e,t,a){var n=$(e).text();if(n=="高级搜索"){$(a).layout("panel","north").panel("resize",{height:t});$(a).layout("resize");$(e).text("关闭搜索")}if(n=="关闭搜索"){$(a).layout("panel","north").panel("resize",{height:1});$(a).layout("resize");$(e).text("高级搜索")}};module.setWindow=function(e){var t=window.top.an_element;if(t){window.top.an_element=$.extend(window.top.an_element,e)}else{window.top.an_element=e}};module.getWindow=function(e){return window.top.an_element};module.perform=function(e){var t=$("body");if(e){t=e}for(var a=0;a<andy.UI_PERFORM.length;a++){var n=andy.UI_PERFORM[a];if(n=="u-switch"){t.find("."+n).each(function(e,t){$(t).switchs()})}}for(var a=0;a<andy.UI_ATTR.length;a++){var n=andy.UI_ATTR[a];if(n=="an-tabs"){t.find("["+n+"]").each(function(e,t){var a=$(t);if(a.attr(n)!="an-tabs"){a.attr(n,"an-tabs");a.an_tabs({})}})}else if(n=="an-datagrid"){t.find("["+n+"]").each(function(e,t){var a=$(t);if(a.attr(n)!="an-datagrid"){a.attr(n,"an-datagrid");a.an_datagrid({})}})}else if(n=="an-combo"){t.find("["+n+"]").each(function(e,t){var a=$(t);if(a.attr(n)!="an-combo"){a.attr(n,"an-combo");a.an_combo({})}})}else if(n=="an-spinner"){t.find("["+n+"]").each(function(e,t){var a=$(t);if(a.attr(n)!="an-spinner"){a.attr(n,"an-spinner");a.an_spinner({})}})}else if(n=="an-related"){t.find("["+n+"]").each(function(e,t){var a=$(t);if(a.attr(n)!="an-related"){a.attr(n,"an-related");a.an_related({})}})}else if(n=="an-accordion"){t.find("["+n+"]").each(function(e,t){var a=$(t);if(a.attr(n)!="an-accordion"){a.attr(n,"an-accordion");a.an_accordion({})}})}else if(n=="an-datagridPagination"){t.find("["+n+"]").each(function(e,t){var a=$(t);if(a.attr(n)!="an-datagridPagination"){a.attr(n,"an-datagridPagination");a.an_datagridPagination({})}})}}andy.img()};module.layout=function(e){if(andy.IE()==6&&andy.LAYOUT_IE6==false){return false}var t=$("body");if(e){t=e}t.each(function(e,t){var a=$(t);var n,i;if(a.parent().is("body")){n=$(window).width();i=$(window).height()}else{var r=a.parent();if(r.is("form")){r=r.parent()}n=r.width();i=r.height()}for(var o=0;o<andy.UI_LAYOUT.length;o++){var s=andy.UI_LAYOUT[o];if(a.hasClass(s)){if(s=="g-layout"){andy.autolayout(a,n,i)}else if(s=="g-max"){andy.gmax(a)}else if(s=="g-h-max"){andy.hmax(a)}else if(s=="g-w-max"){andy.wmax(a)}}}for(var o=0;o<andy.UI_ATTR.length;o++){var s=andy.UI_ATTR[o];var l=a.attr(s);if(l=="an-tabs"){andy.tabsLayout(a)}else if(l=="an-datagrid"){andy.datagridLayout(a)}}if(a.children("div").length>0){a.children("div").each(function(e,t){var a=$(t);if(!a.hasClass("f-hidden")&&!a.hasClass("item")){andy.layout(a)}});andy.formlayout()}else if(a.children("table").length>0){a.children("table").each(function(e,t){andy.layout($(t))});andy.formlayout()}else if(a.children("form").length>0){a.children("form").each(function(e,t){andy.layout($(t))});andy.formlayout()}else if(a.children("iframe").length>0){var d=andy.IE();if(d<=8&&d!=0){var c=a.children("iframe");if(c[0].contentWindow&&c[0].contentWindow.andy){c[0].contentWindow.andy.layout()}}}})};module.tabsLayout=function(e){var t=e.parent().height();var a=e.parent().width();var n=e[0];if(n.option&&n.option.fit==false){if(n.option.height>0){t=n.option.height}if(n.option.width>0){a=n.option.width}}var i=e.children(".m-tabs-header");var r=e.children(".m-tabs-content");var o=r.children(".item");var s=parseInt(o.css("padding-left"));var l={head:"m-tabs-header",body:"m-tabs-content",hidden:"f-hidden",layouted:"layouted",item:"item",active:"activate",headTop:"head-top",headLeft:"head-left",headRight:"head-right",headBottom:"head-bottom"};if(typeof s!="number"){s=0}var d=0;var c=0;if(!e.hasClass(l.headTop)&&!e.hasClass(l.headLeft)&&!e.hasClass(l.headRight)&&!e.hasClass(l.headBottom)){d=i.outerHeight()}else if(e.hasClass(l.headTop)){d=i.outerHeight()}else if(e.hasClass(l.headLeft)){c=i.outerWidth()}else if(e.hasClass(l.headRight)){c=i.outerWidth()}else if(e.hasClass(l.headBottom)){d=i.outerHeight()}e.outerHeight(t).outerWidth(a);r.outerHeight(t-d).outerWidth(a-c);var f=r.height();var u=r.width();r.children().each(function(e,t){var a=$(t);a.removeClass(l.layouted);a.outerHeight(f).outerWidth(u);if(a.hasClass(l.active)){andy.layout(a)}})};module.datagridLayout=function(e){var t=e.parent().parent().parent().height();var a=e.parent().parent().parent().width();e.an_tableLayout(e,a,t)};module.autolayout=function(e,t,a){if(e[0]){e.outerWidth(t).outerHeight(a)}var n=e;var i=n.children(".layout-head");var r=n.children(".layout-left");var o=n.children(".layout-right");var s=n.children(".layout-foot");var l=n.children(".layout-center");if(i[0]){i.outerWidth(t)}if(s[0]){s.outerWidth(t)}if(r[0]){var d=0;var c=0;if(i[0]){d=i.height()}if(s[0]){c=s.height()}r.height(a-d-c);r.css("top",d+"px")}if(o[0]){var d=0;var c=0;if(i[0]){d=i.height()}if(s[0]){c=s.height()}o.height(a-d-c);o.css("top",d+"px")}if(l[0]){var f=0;var u=0;var h=0;var v=0;var p=0;var g=0;if(r[0]){f=r.width();p=r.outerWidth()}if(o[0]){u=o.width();g=o.outerWidth()}if(i[0]){h=i.outerHeight()}if(s[0]){v=s.outerHeight()}l.outerWidth(t-p-g);l.outerHeight(a-h-v);l.css({top:h+"px",left:p+"px"})}if(l.children().is("iframe")){var m=l.height();l.children("iframe").height(m);l.css("overflow","hidden")}};module.getInnerSize=function(e){var t={innerWidth:0,innerHeight:0};var a=e.parent();var n=a.innerHeight();if(a.css("padding-top")){n-=parseInt(a.css("padding-top"))}if(a.css("padding-bottom")){n-=parseInt(a.css("padding-bottom"))}var i=a.innerWidth();if(a.css("padding-left")){i-=parseInt(a.css("padding-left"))}if(a.css("padding-right")){i-=parseInt(a.css("padding-right"))}t.innerWidth=i;t.innerHeight=n;return t};module.hmax=function(e){var t=andy.getInnerSize(e);var a=t.innerHeight;var n=t.innerWidth;var i=e.siblings(".g-h-max").length+1;var r=$(e).siblings().not(".g-h-max");var o=r.not(".u-float");var s=o.length;var l=0;for(var d=0;d<s;d++){l+=$(o[d]).outerHeight()}var c=(a-l)%i;var f=Math.floor((a-l)/i);if(e.index()<c){f=f+1}e.outerHeight(f).outerWidth(n)};module.wmax=function(e){var t=andy.getInnerSize(e);var a=t.innerHeight;var n=t.innerWidth;var i=e.siblings(".g-w-max").length+1;var r=$(e).siblings().not(".g-w-max");var o=r.not(".u-float");var s=o.length;var l=0;for(var d=0;d<s;d++){l+=$(o[d]).outerWidth()}var c=(n-l)%i;var f=Math.floor((n-l)/i);if(e.index()<c){f=f+1}e.outerHeight(a).outerWidth(f)};module.gmax=function(e){var t=andy.getInnerSize(e);var a=t.innerHeight;var n=t.innerWidth;e.outerWidth(n);e.outerHeight(a)};module.panelauto=function(){$(".u-panel.u-datagrid").each(function(e,t){var a=$(t);var n=a.parent().width(),i=a.parent().height();a.height(i);var r=a.outerHeight();var o=a.children(".panel-head");var s=a.children(".panel-body");var l=a.children(".panel-foot");if(s[0]){s.height(r-(o.outerHeight()||0)-(l.outerHeight()||0))}});$(".u-panel.window").each(function(e,t){var a=$(t);var n=parseInt(a.parent().css("padding-top"));var i=parseInt(a.parent().css("padding-bottom"));var r=a.parent().width(),o=a.parent().height()-n-i;a.height(o);var s=a.height();var l=a.children(".panel-head");var d=a.children(".panel-body");var c=parseInt(d.css("padding-top"));var f=parseInt(d.css("padding-bottom"));var u=a.children(".panel-foot");if(d){d.height(s-(l.outerHeight()||0)-(u.outerHeight()||0)-c-f)}})};module.uiLayout=function(e){for(var t=0;t<andy.UI_ATTR.length;t++){var a=andy.UI_ATTR[t];e.children().find("["+a+"]").trigger("layout")}};module.formlayout=function(){$(".m-table-form.inline").find(".u-formitem").each(function(e,t){var a=$(t);var n=a.width(),i=a.parent().height();var r=0;a.parent().parent().find(".u-input-span, .u-input, textarea, .g-combo").each(function(e,t){var a=$(t);if(r==0){r=a.outerHeight()}else if(a.outerHeight()>r){r=a.outerHeight()}});a.parent().siblings().each(function(e,t){var a=$(t);a.height(r)});a.parent().height(r)});$(".u-time-group").find(".u-time-input").each(function(e,t){var a=$(t);andy.inputLayout(a)});$(".u-group").find(".u-input, .g-combo").each(function(e,t){var a=$(t);andy.inputLayout(a)})};module.inputLayout=function(e){var t=e.parent().width();var a=0;var n=1;if(e.parent().hasClass("u-time-input")){return false}e.siblings().each(function(a,i){var r=$(i);if(r.hasClass("infobox")==false&&r.hasClass("u-nd")==false&&r.hasClass("u-input")==false&&r.hasClass("u-time-input")==false){if(e.hasClass("u-input")&&r.hasClass("g-combo")){t-=r.outerWidth()}else if(r.hasClass("g-combo")==false&&r.hasClass("u-time-input")==false){t-=r.outerWidth()}}if(e.hasClass("u-input")&&r.hasClass("u-input")||e.hasClass("g-combo")&&r.hasClass("g-combo")||e.hasClass("u-time-input")&&r.hasClass("u-time-input")){n+=1}});e.outerWidth(Math.floor(t/n));if(e.parent().parent().hasClass("g-combo")){var i=andy.combo("getTouchTarget",e);var r=andy.combo("getShowTarget",e);if(i&&r){r.width(e.width())}}};module.formlayout_bk=function(){return false;$(".m-table-form").find(".u-formitem").each(function(e,t){var a=$(t);var n=a.width(),i=a.parent().height();if(a.parents(".m-table-form").is(".inline")){var r=0;a.parent().parent().find(".u-input-span, .u-input, textarea, .g-combo").each(function(e,t){var a=$(t);if(r==0){r=a.outerHeight()}else if(a.outerHeight()>r){r=a.outerHeight()}});a.parent().siblings().each(function(e,t){var a=$(t);a.height(r)});a.parent().height(r);a.find(".u-input-span, .u-input, textarea, .g-combo").each(function(e,t){var a=$(t);if(a.hasClass("g-combo")){andy.comboLayout(a)}else{andy.inputLayout(a)}})}else{a.find(".u-input, .g-combo").each(function(e,t){var a=$(t);if(a.parent().parent().hasClass("g-combo")==false){if(a.parent().hasClass("u-group")==false||a.parent().hasClass("u-time-input")==false){if(a.hasClass("g-combo")){andy.inputLayout(a)}else{a.outerWidth(n)}}else{andy.inputLayout(a)}}})}});$(".m-table-forms").find("td").each(function(e,t){var a=$(t);if(a.parents(".m-table-forms").is(".inline")){a.find(".u-input-span").each(function(e,t){var a=$(t);andy.inputLayout(a)})}});$(".m-table-form.inline.style01").find(".u-formitem").each(function(e,t){var a=$(t);var n=a.width(),i=a.parent().height();a.find(".g-combo").each(function(e,t){var a=$(t);var n=andy.combo("getShowTarget",a);if(n){n.width(n.width())}})});$(".u-time-group").find(".u-time-input").each(function(e,t){var a=$(t);andy.inputLayout(a)});$(".u-group").find(".u-input").each(function(e,t){var a=$(t);andy.inputLayout(a)})};module.comboLayout_bk=function(e){return false;var t=e.parent().width();var a=0;var n=1;e.siblings().each(function(e,a){var i=$(a);if(i.hasClass("infobox")==false&&i.hasClass("u-nd")==false&&i.hasClass("g-combo")==false){t-=i.outerWidth()}if(i.hasClass("g-combo")){n+=1}});t-=1;if(t<=0&&e.parent().hasClass("u-l-select")==false){e.css("width","100%")}else{if(e.hasClass("g-combo")){e.outerWidth(Math.floor(t/n))}else{e.outerWidth(Math.floor(t/n))}}if(e.hasClass("g-combo")){var i=andy.combo("getTouchTarget",e);var r=andy.combo("getShowTarget",e);if(i&&r){r.width(i.width())}}};module.inputLayout_bk=function(e){return false;var t=e.parent().width();var a=0;var n=1;if(e.parent().hasClass("u-time-input")){return false}e.siblings().each(function(a,i){var r=$(i);if(r.hasClass("infobox")==false&&r.hasClass("u-nd")==false&&r.hasClass("u-input")==false&&r.hasClass("u-time-input")==false){if(e.hasClass("u-input")&&r.hasClass("g-combo")){t-=r.outerWidth()}else if(r.hasClass("g-combo")==false&&r.hasClass("u-time-input")==false){t-=r.outerWidth()}}if(e.hasClass("u-input")&&r.hasClass("u-input")||e.hasClass("g-combo")&&r.hasClass("g-combo")||e.hasClass("u-time-input")&&r.hasClass("u-time-input")){n+=1}});t-=1;if(t<=0&&e.parent().hasClass("u-l-select")==false){e.css("width","100%")}else{if(e.hasClass("g-combo")){if(e.parents(".m-table-form").is(".inline")||e.parents(".m-table-forms").is(".inline")){e.outerWidth(Math.floor(t/n)+1)}else if(e.parents("table").is(".m-table-form")){e.outerWidth(Math.floor(t/n)-2)}else if(e.parents("table").is(".m-table-forms")){e.outerWidth(Math.floor(t/n))}}else{e.outerWidth(Math.floor(t/n))}}if(e.hasClass("g-combo")){var i=andy.combo("getTouchTarget",e);var r=andy.combo("getShowTarget",e);if(i&&r){r.width(e.width())}}};module.shrinkageLayout=function(e){var t=$.extend({element:"",min:0,max:100,direction:"v",isAnimation:true,time:100,layout:true,shrinkageBefore:function(){},callback:function(){}},e);var a=t.element;var n=a.height();var i=a.width();var r=t.min;var o=t.max;var s=t.time;var l=function(){if(t.layout){$.fn.layoutMain()}t.callback(a)};if(!t.isAnimation){s=0}t.shrinkageBefore();if(t.direction=="v"){if(a.height()!=r){a.animate({height:r+"px"},s,l)}else{a.animate({height:o+"px"},s,l)}}if(t.direction=="l"){if(a.width()!=r){a.animate({width:r+"px"},s,l)}else{a.animate({width:o+"px"},s,l)}}};module.combo=function(){var e={};var t="";for(var a=0;a<arguments.length;a++){var n=arguments[0];if(typeof n=="object"){e=n}else if(typeof n=="string"){t=n}}var i=$.extend({combo:"",showEvent:"click",hiddenEvent:"mouseleave",isEnable:true,setTime:200,showComplete:function(){},hiddenComplete:function(){}},e);if(t!=""){if(t=="getTouchTarget"){var r=arguments[1];return c(r)}else if(t=="getShowTarget"){var r=arguments[1];return f(r)}else if(t=="hiddenTarget"){var r=arguments[1];return u(r)}}else{var r=i.combo;r.touchTarget=r.find("[combo]").first();r.showTarget;r.children(":gt(0)").each(function(e,t){if($(t).is("[combo='"+r.touchTarget.attr("combo")+"']")){r.showTarget=$(t)}});var o=r.attr("opstion");var s="";if(o){o=o.split(",");for(var a=0;a<o.length;a++){var l=o[a].split(":");if(l[0]=="show"){i.showEvent=l[1]}else if(l[0]=="hidden"){i.hiddenEvent=l[1]}}}var d="";r.enable=i.isEnable;if(i.isEnable){r.touchTarget.unbind(i.showEvent);r.touchTarget.bind(i.showEvent,function(e){if(r.data("isEnable")){if(r.hasClass("open")){r.showTarget.css("display","none");r.removeClass("open")}else{if(r.showTarget.is("ul")==false){andy.formlayout()}r.showTarget.css("display","block");r.addClass("open");i.showComplete()}}});r.on(i.hiddenEvent,function(e){d=setTimeout(function(){r.showTarget.css("display","none");r.removeClass("open");i.hiddenComplete();d=""},i.setTime)});r.mouseover(function(e){if(d!=""){clearTimeout(d);d=""}})}}function c(e){return e.find("[combo]").first()}function f(e){var t;var a=e.find("[combo]").first();e.children(":gt(0)").each(function(e,n){if($(n).is("[combo='"+a.attr("combo")+"']")){t=$(n)}});return t}function u(e){var t=f(e);if(t){t.css("display","none")}e.removeClass("open")}};module.toWindow=function(){var e=arguments[0];var t=arguments[1];var a=window.top.$("#"+e)[0]||$("#"+e)[0];if(!a){a=window.top.$("iframe").contents().find("#"+e)[0]}a=a.contentWindow;var n=[];if(arguments.length>2){for(var i=2,r=arguments.length;i<r;i++){n.push(arguments[i])}}if(a&&a[t]){a[t].apply(this,n)}else{console.log("don't have this id!")}};module.arrayFunCall=function(e,t){var a=true;if(e.length>0){var n=0;for(n;n<e.length;n++){if(typeof e[n]==="function"){a=a&&e[n](t)}}}return a};module.extend=function(){var e,t,a,n,i,r,o=arguments[0]||{},s=1,l=arguments.length,d=false;if(typeof o==="boolean"){d=o;o=arguments[1]||{};s=2}if(typeof o!=="object"&&!andy.isFunction(o)){o={}}if(l===s){o=this;--s}for(;s<l;s++){if((e=arguments[s])!=null){for(t in e){a=o[t];n=e[t];if(o===n){continue}if(d&&n&&(andy.isPlainObject(n)||(i=andy.isArray(n)))){if(i){i=false;r=a&&andy.isArray(a)?a:[]}else{r=a&&andy.isPlainObject(a)?a:{}}o[t]=andy.extend(d,r,n)}else if(n!==undefined){o[t]=n}}}}return o};window.andy=module})(window);(function(e){e.fn.an_queue=function(t){var a=t.queue;e(this).queue("goqueue",a)};e.fn.an_queue.next=function(t){var a=e(this);if(t){var n=setTimeout(function(){a.dequeue("goqueue")},t)}else{a.dequeue("goqueue")}};e.fn.an_imgLoad=function(t){var a=e.extend({time:4e3,callback:function(){}},t);var n=this,i=0,r=0,o=this.length;n.each(function(){var t=this,a=e(t).attr("date-src"),n=a?a:t.src;var r=new Image;r.onload=function(){r.onload=null;t.src=n;i++};r.src=n});var s=window.setInterval(function(){r++;if(i==o||r*200>=a.time){window.clearInterval(s);a.callback()}},200)};e.fn.layoutMain=function(){if(andy.IE()==6){if(andy.LAYOUT_IE6){andy.layout()}}else{andy.layout()}};e(function(){e.fn.layoutMain();andy.perform();andy.floatact();andy.a()})})(jQuery);$(document).ready(function(){var e=null;var t=andy.SETTIME_02;$(window).resize(function(a){if(e){window.clearTimeout(e)}e=window.setTimeout(function(){$.fn.layoutMain();e=null;if(andy.IE()>7||andy.IE()==0){e=window.setTimeout(function(){$.fn.layoutMain();e=null},t/2)}},t)})});(function(e,t){var a=function(e,t){var a;if(e==="top"){a=window.top.$("body").find(".loading_bg")}else{a=window.$("body").find(".loading_bg")}a.addClass("fadeOut");setTimeout(function(){a.remove();if(typeof t=="function"){t()}},500)};e.overlay=function(e,a,n,i){var r='<div class="loading_bg '+n+' animated fadeIn">'+a+"</div>";if(e=="top"&&window.top.$("body").find(".loading_bg").length==0){window.top.$("body").append(r)}else if(e=="top"&&window.top.$("body").find(".loading_bg").length==1){window.top.$("body").find(".loading_bg").html(a)}else if(e=="self"&&t("body").find(".loading_bg").length==0){t("body").append(r)}else if(e=="self"&&t("body").find(".loading_bg").length==1){t("body").find(".loading_bg").html(a)}else if(e!="self"&&e!="top"&&t("body").find(".loading_bg").length==0){t(e).append(r);t(e).find(".loading_bg").css({position:"absolute"})}else if(e!="self"&&e!="top"&&t("body").find(".loading_bg").length==1){t(e).find(".loading_bg").html(a)}if(typeof i=="function"){i()}};e.loading=function(t,n,i){var r={};var o='<div class="loading_bg_center"><span class="quarters-loader"></span><p id="loadingtext">'+n+"</p></div>";e.overlay(t,o);if(typeof i=="function"){i()}r.close=function(e){a(t,e)};r.changeText=function(a){var n='<div class="loading_bg_center"><span class="quarters-loader"></span><p id="loadingtext">'+a+"</p></div>";e.overlay(t,n)};return r};e.closeOverlay=function(e){a("top",e)};return e})(andy,$);!function(){function e(e){return e.replace(y,"").replace(w,",").replace(x,"").replace(T,"").replace(k,"").split(C)}function t(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function a(a,n){function i(e){return u+=e.split(/\n/).length-1,c&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=b[1]+t(e)+b[2]+"\n"),e}function r(t){var a=u;if(d?t=d(t,n):o&&(t=t.replace(/\n/g,function(){return u++,"$line="+u+";"})),0===t.indexOf("=")){var i=f&&!/^=[=#]/.test(t);if(t=t.replace(/^=[=#]?|[\s;]*$/g,""),i){var r=t.replace(/\s*\([^\)]+\)/,"");h[r]||/^(include|print)$/.test(r)||(t="$escape("+t+")")}else t="$string("+t+")";t=b[1]+t+b[2]}return o&&(t="$line="+a+";"+t),m(e(t),function(e){if(e&&!p[e]){var t;t="print"===e?w:"include"===e?x:h[e]?"$utils."+e:v[e]?"$helpers."+e:"$data."+e,T+=e+"="+t+",",p[e]=!0}}),t+"\n"}var o=n.debug,s=n.openTag,l=n.closeTag,d=n.parser,c=n.compress,f=n.escape,u=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},g="".trim,b=g?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],y=g?"$out+=text;return $out;":"$out.push(text);",w="function(){var text=''.concat.apply('',arguments);"+y+"}",x="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+y+"}",T="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(o?"$line=0,":""),k=b[0],C="return new String("+b[3]+");";m(a.split(s),function(e){e=e.split(l);var t=e[0],a=e[1];1===e.length?k+=i(t):(k+=r(t),a&&(k+=i(a)))});var _=T+k+C;o&&(_="try{"+_+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+t(a)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var $=new Function("$data","$filename",_);return $.prototype=h,$}catch(E){throw E.temp="function anonymous($data,$filename) {"+_+"}",E}}var n=function(e,t){return"string"==typeof t?g(t,{filename:e}):o(e,t)};n.version="3.0.0",n.config=function(e,t){i[e]=t};var i=n.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},r=n.cache={};n.render=function(e,t){return g(e,t)};var o=n.renderFile=function(e,t){var a=n.get(e)||p({filename:e,name:"Render Error",message:"Template not found"});return t?a(t):a};n.get=function(e){var t;if(r[e])t=r[e];else if("object"==typeof document){var a=document.getElementById(e);if(a){var n=(a.value||a.innerHTML).replace(/^\s*|\s*$/g,"");t=g(n,{filename:e})}}return t};var s=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?s(e.call(e)):""),e},l={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},d=function(e){return l[e]},c=function(e){return s(e).replace(/&(?![\w#]+;)|[<>"']/g,d)},f=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},u=function(e,t){var a,n;if(f(e))for(a=0,n=e.length;n>a;a++)t.call(e,e[a],a,e);else for(a in e)t.call(e,e[a],a)},h=n.utils={$helpers:{},$include:o,$string:s,$escape:c,$each:u};n.helper=function(e,t){v[e]=t};var v=n.helpers=h.$helpers;n.onerror=function(e){var t="Template Error\n\n";for(var a in e)t+="<"+a+">\n"+e[a]+"\n\n";"object"==typeof console&&console.error(t)};var p=function(e){return n.onerror(e),function(){return"{Template Error}"}},g=n.compile=function(e,t){function n(a){try{return new l(a,s)+""}catch(n){return t.debug?p(n)():(t.debug=!0,g(e,t)(a))}}t=t||{};for(var o in i)void 0===t[o]&&(t[o]=i[o]);var s=t.filename;try{var l=a(e,t)}catch(d){return d.filename=s||"anonymous",d.name="Syntax Error",p(d)}return n.prototype=l.prototype,n.toString=function(){return l.toString()},s&&t.cache&&(r[s]=n),n},m=h.$each,b="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",y=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,w=/[^\w$]+/g,x=new RegExp(["\\b"+b.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),T=/^\d[^,]*|,\d[^,]*/g,k=/^,+|,+$/g,C=/^$|,+/;i.openTag="{{",i.closeTag="}}";var _=function(e,t){var a=t.split(":"),n=a.shift(),i=a.join(":")||"";return i&&(i=", "+i),"$helpers."+n+"("+e+i+")"};i.parser=function(e){e=e.replace(/^\s/,"");var t=e.split(" "),a=t.shift(),i=t.join(" ");switch(a){case"if":e="if("+i+"){";break;case"else":t="if"===t.shift()?" if("+t.join(" ")+")":"",e="}else"+t+"{";break;case"/if":e="}";break;case"each":var r=t[0]||"$data",o=t[1]||"as",s=t[2]||"$value",l=t[3]||"$index",d=s+","+l;"as"!==o&&(r="[]"),e="$each("+r+",function("+d+"){";break;case"/each":e="});";break;case"echo":e="print("+i+");";break;case"print":case"include":e=a+"("+t.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(i)){var c=!0;0===e.indexOf("#")&&(e=e.substr(1),c=!1);for(var f=0,u=e.split("|"),h=u.length,v=u[f++];h>f;f++)v=_(v,u[f]);e=(c?"=":"=#")+v}else e=n.helpers[a]?"=#"+a+"("+t.join(",")+");":"="+e}return e},"function"==typeof define?define(function(){return n}):"undefined"!=typeof exports?module.exports=n:this.template=n}();(function(e,t){var a=function(e){var t,a={};for(t in e){if(e.hasOwnProperty(t)){a[e[t]]=parseInt(t,10)}}return a};e.CODE_MSG_MAPPING={8:"BackSpace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Caps_Lock",27:"Esc",32:"Space",33:"PageUp",
34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",41:"Select",42:"Print",43:"Execute",45:"Insert",46:"Delete",47:"Help",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Win",92:"Win",96:"KP_0",97:"KP_1",98:"KP_2",99:"KP_3",100:"KP_4",101:"KP_5",102:"KP_6",103:"KP_7",104:"KP_8",105:"KP_9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num_Lock",145:"Scroll_Lock",187:"+",186:";",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};e.MSG_CODE_MAPPING=a(e.CODE_MSG_MAPPING);var n={};var i={};var r=function(t){var a,i=t||window.event;if(i.target.localName==="input"&&i&&(i.keyCode==27||i.keyCode==13)){t.target.blur();return}a=e.CODE_MSG_MAPPING[i.keyCode];if(a){a=a.toLowerCase();if(n[a]&&n[a].length>0){n[a].pop()(i);return}}};var o=function(t){var a=t||window.event;var n=e.CODE_MSG_MAPPING[a.keyCode];if(n){n=n.toLowerCase();if(i[n]&&i[n].length>0){i[n].pop()(a);return}}};var s=function(e,a,r,o){r=r||"keyup";a=a.toLowerCase();if(e){t(e)[r](function(e){if(e.keyCode==a){o(e)}})}else{if(r==="keyup"){i[a]=i[a]||[];i[a].push(o)}else if(r==="keydown"){n[a]=n[a]||[];n[a].push(o)}}};var l=function(e,a){if(e){t(e).off(a||"keydown")}};e.addKeyEvent=s;e.removeKeyEvent=l;t(document).keydown(r);t(document).keyup(o)})(andy,$);(function(e,t){var a;var n='<div class="infobox" style="width:{{width}};top:{{top}}; left:{{left}}; bottom:{{bottom}}; right:{{right}}; display: none;">'+'<i class="iconfont {{ip}}">{{itype}}</i>'+'<div class="content">{{content}}</div>'+"</div>";var i={width:"auto",top:0,left:0,bottom:"auto",right:"auto",ip:"b",itype:"&#xe605;",content:"提示",position:"bottom"};var r=function(t){var a,n,r={};if(t.getAttribute("options")){r=e.stringToJson(t.getAttribute("options"))}for(a in i){n=t.getAttribute(a);if(n){r[a]=n}}return r};e.tooltip=function(e,r,o,s,l){var d={},c,f=t.extend({},i,{content:o,position:r});if(!e.parent().is(".m-tooltip")){e.wrap("<div class='m-tooltip "+s+"'></div>")}if(r=="bottom"){f.top=e.outerHeight()+2+"px";f.itype="&#xe605;"}else if(r=="top"){f.top="auto";f.bottom=e.outerHeight()+2+"px";f.ip="t";f.itype="&#xe611;"}else if(r=="left"){f.ip="l";f.left=-o.length*15+5+"px";f.itype="&#xe610;"}else if(r=="right"){f.ip="r";f.left=e.outerWidth()+"px";f.width=o.length*15+"px";f.itype="&#xe612;"}a=a||template.compile(n);t(a(f)).insertAfter(e);c=e.next(".infobox");d.show=function(){c.fadeIn(200)};d.hide=function(){c.fadeOut(200)};d.change=function(e){c.find(".content").html(e)};if(l){e.on("mouseover",function(){d.show()});e.on("mouseleave",function(){d.hide()})}return d};e.showTooltip=function(e,a){t(e).next(".infobox").fadeIn(200);if(a){setTimeout(function(){t(e).next(".infobox").fadeOut(2500)},500)}};e.hideTooltip=function(e){t(e).next(".infobox").fadeOut(200)};e.changeTooltip=function(e,a){t(e).next(".infobox").find(".content").html(a)};t(document).ready(function(){t(".tooltip").each(function(a,n){var i=r(n);e.tooltip(t(n),i.position,i.content,i.type,i.isMouseOverShow)})});return e})(andy,$);(function(e,t){"use strict";var a=35+40+13-3,n=9e3,i="systemstage",r={"成功":{title:"成功!",icon:"&#xe700;",iconclass:"f-color-success",buttons:[{text:"确定",cls:"success"}]},"询问":{title:"信息",icon:"&#xe744;",iconclass:"f-color-info",buttons:[{text:"确定",cls:"success"},{text:"取消"}]},"错误":{title:"错误!",icon:"&#xe701;",iconclass:"f-color-danger",buttons:[{text:"返回"}]},"禁止":{title:"禁止!",icon:"&#xe702;",iconclass:"f-color-danger",buttons:[{text:"返回"}]},"警告":{title:"警告!",icon:"&#xe6ff;",iconclass:"f-color-warning",buttons:[{text:"返回"},{text:"继续"}]},"提示":{title:"提示!",icon:"&#xe624;",iconclass:"f-color-info",buttons:[{text:"确定",cls:"success"},{text:"取消"}]},"default":{title:"提示!",icon:"&#xe624;"}},o=function(e){var a,n,i;if(e){if(typeof e==="object"){i=t(e).parents(".u-panel");if(i.length===0){i=undefined}}if(typeof e==="string"){a=e.indexOf("#")>-1?e:"#"+e;n=window.top.$(a);i=n[0]?n:window.top.$("iframe").contents().find(a)}}return i},s=function(t,a,n){var i=e.IE();if(a&&(!(i<=8)||i===0)){t.addClass(a);window.setTimeout(function(){t.removeClass(a);if(n){n(t)}},500)}else{if(n){n(t)}}},l=function(a,n,i){var r,o,s,l,d,c="",f="",u="",h="";l=window.top.$.data(a[0],"an_dialog").options;r=a.parent()[0];d=t(r).scrollTop();if(e.IE()>0){d=r.ownerDocument.documentElement.scrollTop||window.pageYOffset||r.ownerDocument.body.scrollTop}o=a.parent().height();s=a.parent().width();f=n||(s-a.width())/2;c=i||(o-a.height())/2+d;if(l.location){if(l.location.indexOf("left")!==-1){f=5}if(l.location.indexOf("top")!==-1){c=5+d}if(l.location.indexOf("right")!==-1){u=5;f=""}if(l.location.indexOf("bottom")!==-1){c=d+r.clientHeight-5-a.eq(0).height()}}a.eq(0).css({left:f,top:c,right:u,bottom:h})},d=function(e,n,i){var r,o,s,l,d,c,f,u;u=window.top.$.data(e[0],"an_dialog");if(u&&u.options){r=u.options;d=e.next(".u-panel-mask");c=e.find(".panel-body");o=e.parents("html")[0]||window.top;s=t(o).height();l=t(o).width();f=r.buttons&&r.buttons.length>0?a:a-40;if(arguments.length===2&&n==="max"){e.height(s-20);e.width(l-10);c.height(s-f);c.width(l-10)}else{if(i!==undefined){i=i>s?s-10:i;e.height(i);c.height(i===""?i:i-f)}if(n!==undefined){n=n>l?l-10:n;e.width(n);c.width(n===""?n:n-10)}}d.height(o.scrollHeight);d.width(o.scrollWidth)}},c=function(a){var n,i,r,l;if(a){n=a.next(".u-panel-mask");try{r=window.top.$.data(a[0],"an_dialog").options}catch(d){throw"can not close this dialog!"}if(!r.onBeforeClose||r.onBeforeClose&&r.onBeforeClose(r)){s(a.eq(0)||a,r.aniClose,function(){i=a.nextAll('div[dialogMoveRect="true"]');if(i){i.remove()}a.hide();n.hide();if(r.onClose){r.onClose(r)}if(r.parent){l=o(r.parent);if(l){c(l)}}if(r.url){e.destroyIframe(a.find("iframe")[0])}if(r.div){t("#dailogreplace"+r.id).replaceWith(a.find(".panel-body").children())}a.remove();n.remove()})}}},f=function(){var a,i={},r,o,s,c,f,u,h,v=false,p={},g={},m={},b,y,w,x=[{cls:"move",coe:[1,1,0,0]},{cls:"n-resize",coe:[0,1,0,-1]},{cls:"ne-resize",coe:[0,1,1,-1]},{cls:"e-resize",coe:[0,0,1,0]},{cls:"se-resize",coe:[0,0,1,1]},{cls:"s-resize",coe:[0,0,0,1]},{cls:"sw-resize",coe:[1,0,-1,1]},{cls:"w-resize",coe:[1,0,-1,0]},{cls:"nw-resize",coe:[1,1,-1,-1]}];u=window.top.$('<div dialogMoveRect="true" style="border: 1px dashed dodgerblue; position: absolute; "></div>');r=function(){v=false;if(s){s.parent("body").css("cursor","")}f.removeClass("an_dialog_dragLayer");u.remove()};c=function(){var t,a=window.top.$.data(s[0],"an_dialog").options;var n=u.width();var i=u.height();var o=u.offset().left;var c=u.offset().top;if(n!=s.outerWidth()||i!=s.outerHeight()){a.onResize(n,i);d(s,n,i)}if(o!=s.offset().left||c!=s.offset().top){a.onMove(o,c);if(e.IE()===6){t=s.parents("html")[0]||window.top;c=c-t.scrollTop}l(s,o,c)}r()};w=function(e){var a=e.target||e.srcElement;if(v){return}b="";if(a.getAttribute("an_dialog_drag")){s=t(a).parents(".u-panel");if(a.getAttribute("an_dialog_drag")==="true"){b=0}}else if(a.getAttribute("an_dialog_resize")){s=t(a)}else if(a.getAttribute("an_dialog")){s=t(a).parents(".u-panel")}else{s=undefined}if(s){if(s.attr("an_dialog_resize")==="true"){if(s.position().top<e.y&&e.y<s.position().top+5){b=1}if(s.position().left+s.outerWidth()>e.x&&e.x>s.position().left+s.outerWidth()-5){b=b?2:3}if(s.position().top+s.outerHeight()>e.y&&e.y>s.position().top+s.outerHeight()-5){b=b?4:5}if(s.position().left<e.x&&e.x<s.position().left+5){b=b===1?8:b===5?6:7}}f=s.next();s.css("cursor",b?x[b].cls:"")}return b};o=function(e){if(v){c()}w(e);if(s&&b!==""){if(e.preventDefault){e.preventDefault()}v=true;p.x=g.x=e.clientX;p.y=g.y=e.clientY;u.css("left",s.offset().left);u.css("top",s.offset().top);u.css("z-index",n+a.winIndex*4+3);u.width(s.outerWidth());u.height(s.outerHeight());s.parent("body").append(u);s.parent("body").css("cursor",x[b].cls);f.addClass("an_dialog_dragLayer")}};h=function(e){var t,a,n;if(!v){w(e)}else{m.x=e.clientX-g.x;m.y=e.clientY-g.y;t=x[b].coe;a=u.offset().left+m.x*t[0];n=u.offset().top+m.y*t[1];a=a<=0?.1:a;a=a>u.parent().width()-u.width()?u.parent().width()-u.width():a;n=n<=0?.1:n;u.css("left",a);u.css("top",n);u.width(u.width()+m.x*t[2]);u.height(u.height()+m.y*t[3]);if(a<=.1||n<=.1||a>=u.parent().width()-u.width()){if(s.offset().left>.1&&s.offset().top>.1&&s.offset().left<u.parent().width()-u.width()){c();return}}g.x=e.clientX;g.y=e.clientY}};y=function(e){if(v===true&&s&&x[b]){if(e.preventDefault){e.preventDefault()}c()}};i.bindEvent=function(e){a=e;if(a.addEventListener){a.addEventListener("mousedown",o);a.addEventListener("mousemove",h);a.addEventListener("mouseup",y)}else if(a.attachEvent){a.document.attachEvent("onmousedown",o);a.document.attachEvent("onmousemove",h);a.document.attachEvent("onmouseup",y)}else{throw"can not add dialogform event listener"}};i.unbindEvent=function(e){a.removeEventListener("mousedown",o);a.removeEventListener("mousemove",h);a.removeEventListener("mouseup",y)};return i};e.dialoghDragInit=f;t.fn.an_dialog=function(a,o){var f,u;if(typeof a==="string"){u=t.fn.an_dialog.methods[a];if(u){return u(this,o)}throw"The method of"+a+"is undefined";return false}f=t.extend({},t.fn.an_dialog.defaults,a);return this.each(function(){var o,u,h,v,p,g,m,b,y,w;if(f.locMyself){o=window}else{h=window.top.document.getElementById(i);o=h&&h.contentWindow.$?h.contentWindow:window.top}if(f.massage){f.width=f.width||300;f.height=f.height||220}else{f.width=f.width||800;f.height=f.height||600}v=function(a){var n,i,r;n=a.next(".u-panel-mask");if(f.maxSize){d(a,"max")}else{d(a,f.width,f.height)}l(a);r=o.$("body").find("[an_dialog].u-panel");if(r.length>1){a[0].style.left=parseInt(a[0].style.left,10)+(r.length-1)*15+"px";a[0].style.top=parseInt(a[0].style.top,10)+(r.length-1)*15+"px"}w(a,o.winIndex);if(e.IE()>7&&t(":focus").length>0){t(":focus").blur()}a.eq(0).show();if(f.modalval){n.addClass("u-panel-maskshow")}t(o).resize(function(e){d(a)});s(a.eq(0),f.aniOpen,f.onOpen);if(!f.url&&!f.data){f.onLoad(a)}};w=function(e,t){var a;a=e.next(".u-panel-mask");e.css("z-index",n+t*4+2);a.css("z-index",n+t*4)};b=function(e){var a,n=e&&e.data||u;a=window.top.$.data(n[0],"an_dialog").options;if(e.target.className.indexOf("restore")>-1){t(e.target).removeClass("tool-restore");t(e.target).addClass("tool-max");d(n,e.target.getAttribute("reW"),e.target.getAttribute("reH")||"")}else{t(e.target).addClass("tool-restore");t(e.target).removeClass("tool-max");e.target.setAttribute("reW",a.width||n.width());e.target.setAttribute("reH",a.height||n.height());d(n,"max")}l(u)};y=function(e){var t;e.delegate(".tool-close","click",e,function(e){c(e.data)});if(f.maximizable){e.delegate(".tool-max","click",e,b);e.delegate(".tool-restore","click",e,b)}e.delegate(".u-panel-mask","click",e,c);if(f.buttons){for(t=0;t<f.buttons.length;t++){if(f.massage&&r[f.massage.type]&&r[f.massage.type].buttons){e.callback=f.massage.callback;f.buttons[t].handler=f.buttons[t].handler||function(e){if(e.data.callback){e.data.callback(e.data,e)}c(e.data)}}e.delegate("button[bt_index="+t+"]","click",e,f.buttons[t].handler)}}};m=function(){var e,n,i,s,l,d;d='<div style="position: absolute;" an_dialog="true" an_dialog_resize = '+f.resizeable+' class="animated u-panel window '+f.cls+'" style="display: none">'+'<div an_dialog="true" class="panel-head">'+" <div an_dialog_drag = "+f.draggable+' class="panel-head-title '+(f.draggable?"an_dialog_drag":"")+'"> #icon# #title#</div>'+'<div an_dialog="true" class="panel-head-bar">#tools#<i class="iconfont tool-close" title="关闭">&#xe602;</i>'+"</div></div>"+"#content# #bottons#</div>"+'<div class="u-panel-mask"></div>';l=function(){var e;if(f.massage){e=f.massage.title||r[f.massage.type].title}return e||f.title};n=function(){var e="";if(f.icon){e='<i class="iconfont "'+f.icon+'">&#xe62c;</i>'}return e};e=function(){var e="",t,n='<i class="iconfont tool-#type#"" href="javascript:void(0)" #attr#> #icon# </i>';if(f.collapsible){e+=n.replace("#type#","collapse").replace("#tip#","收起").replace("#icon#","")}if(f.minimizable){e+=n.replace("#type#","min").replace("#tip#","最小化").replace("#icon#","")}if(f.maximizable){if(f.maxSize){t=n.replace("#type#","restore").replace("#tip#","还原").replace("#icon#","&#xe60c;")}else{t=n.replace("#type#","max").replace("#tip#","最大化").replace("#icon#","&#xe616;")}e+=t.replace("#attr#","reW = "+a.width+" reH ="+a.height)}return e};i=function(){var e="",t,a='<button  bt_index="#index#" class="#class#" > #text# #icon#</button>';if(f.massage){f.buttons=f.buttons||r[f.massage.type].buttons}if(f.buttons){e='<div class="panel-foot">';for(t=f.buttons.length-1;t>=0;t--){e+=a.replace("#index#",t).replace("#class#","u-btn sm "+f.buttons[t].cls||"texture").replace("#text#",f.buttons[t].text||"");if(f.buttons[t].icon){e=e.replace("#icon#",'<i class="iconfont"> + args.buttons[i].icon </i>')}else{e=e.replace("#icon#","")}}e+="</div>"}return e};s=function(){var e,a,n;if(f.url){e='<iframe frameborder="0" an_dialog="true" src = #content# class="panel-body"></iframe><div style="z-index: 1;position: absolute;left:50%;top:50%" class="loading_bg_center"><span class="quarters-loader"></span></div>';a=f.url}else{e='<div an_dialog="true" class="panel-body">#content#</div>';if(f.data){a='<div class="loading_bg_center"><span class="quarters-loader"></span></div>';t.ajax({url:f.data,success:function(t){f.onLoad(u);e=u.find(".loading_bg_center").replaceWith(t)}})}else{if(f.massage){a='<div class="panel-massage-box"><i class="iconfont '+r[f.massage.type].iconclass+' panel-massage-icon">'+r[f.massage.type].icon+"</i>"+'<div class="panel-massage">'+f.massage.content+"</div></div>"}if(f.html){a=f.html}if(f.text){a=f.text}if(f.div){a=""}if(f.mediaBox){a=t(o.document).an_mediabox("get",f.mediaBox)}}}e=e.replace("#content#",a);return e};d=d.replace("#title#",l());d=d.replace("#icon#",n());d=d.replace("#tools#",e());d=d.replace("#content#",s());d=d.replace("#bottons#",i());return d};if(!o.$){throw"错误！ "+o.name+"页面没有jquery!";return}if(f.id&&o.$("body").find("#"+f.id).length>0){o.$("body").find("#"+f.id).addClass("wobble");return false}u=o.$(m());if(f.div){p=u.find(".panel-body");p.append(f.div.clone(true));f.div.replaceWith("<div id='dailogreplace"+f.id+"'></div>")}if(f.url){p=u.find(".panel-body")[0];g=function(){u.find(".loading_bg_center").remove();p.contentWindow.dialog=u;if(p.contentWindow.onresize){p.contentWindow.onresize()}if(p.contentWindow.dialogReady){p.contentWindow.dialogReady(u,f)}f.onLoad()};if(p.attachEvent){p.attachEvent("onload",g)}else{p.addEventListener("load",g)}}o.winIndex=o.winIndex||1;f.id=f.id||(f.locMyself?"win_":"rootWin_")+o.winIndex;u.eq(0).attr("id",f.id);u.find("iframe").attr("dialogid",f.id);u.attr({aniClose:f.aniClose});if(f.massage){u.eq(0).addClass("an_d_massage")}y(u);if(f.onBeforeOpen(u)){o.$("body").append(u);o.winIndex++;window.top.$.data(o.$("#"+f.id)[0],"an_dialog",{options:f});v(u);if(!o.hasDialogHandler){o.andy.dialoghDragInit().bindEvent(o);o.hasDialogHandler=true}}})};t.fn.an_dialog.methods={options:function(e){var t=window.top.$.data(e[0],"an_dialog").options;return t},getOptions:function(e){var t=window.top.$.data(e[0],"an_dialog").options;return t},move:function(e,t){l(e,t.left,t.top)},resize:function(e,t){d(e,t.width,t.height)},find:function(e,t){return o(t)},doCPageFun:function(e,t){if(e.attr("an_dialog")==="true"){e.find("iframe")[0].contentWindow[t.funName](t.argus)}},close:function(e,t){var a;if(e.attr("an_dialog")==="true"){a=e}else if(t){a=o(t)}if(a){c(a)}}};t.fn.an_dialog.defaults={title:"窗口",width:0,height:0,reloadid:"datagrid",modalval:true,source:this,aniOpen:"fadeInDown",aniClose:"zoomOut",locMyself:false,maximizable:false,draggable:true,resizeable:false,collapsible:false,closable:true,cls:"",onLoad:function(){},onBeforeOpen:function(){return true},onOpen:function(){},onBeforeClose:function(){return true},onClose:function(){return true},onResize:function(e,t){},onMove:function(e,t){}}})(andy,jQuery);(function(e){e.fn.extend({an_datagrid:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({table:"",bodyUrl:"",ajaxType:"get",lockTable:{lockRow:0,lockColumn:0},width:"100%",height:"100%",onClickRow:function(){},onDblClickRow:function(){},onClickCell:function(){},onDblClickCell:function(){}},t);var o=r.table;if(o==""){o=e(this).attr("id")}if(!o){o="datagrid_"+andy.getRandom(1e3);e(this).attr("id",o)}var s=e("#"+o);var l=s.parent();var d=l.height();var c=l.width();var f=s.attr("options");var u="";if(f){f="{"+f+"}";f=andy.stringToJson(f);for(var h in f){if(f[h]=="true"){r[h]=true}else if(f[h]=="false"){r[h]=false}else{r[h]=f[h]}}}r.table=s;var v="EVENT_LOCK";var p="EVENT_GET_JSON";var g="EVENT_TABLE_VIEW";var m=false;if(r.height!="100%"||r.height>0){d=r.height}else if(r.height=="100%"){}if(r.width!="100%"||r.width>0){c=r.width}else if(r.width=="100%"){}if(a!=""){if(a=="locakTable"){var b={lockRow:0,lockColumn:0};var y=arguments[1];b=e.extend(b,y);s.trigger(v,b)}else if(a=="tableView"){var w=arguments[1];s.trigger(g,w)}else if(a=="getHeadJson"){var x=[];var s=arguments[1];var T=function(e){var t=0;var a=0;var n=function(e){for(var i=0;i<e.length;i++){var r=e[i];if(r.children.length>0){r.jsonParentIndex=a;n(r.children);a+=1}else{r.jsonIndex=t;t+=1}}};n(e,t)};var k=function(e){var t="open";if(e.hasClass("f-hidden")){t="close"}return t};var C=function(e,t){var a=e-1;var n=0;var t=t;var i="";var r=function(e){var o=0;var s=0;for(var l=0;l<e.length;l++){var d=e[l];if(a==n){if(d.rowspan){}else{if(d.maxColspan){o+=parseInt(d.maxColspan)}else{o+=1}for(var c=s;c<o;c++){if(t==c){i=d;break}}s+=1}}else{if(d.children.length>0){n=parseInt(d.layer);r(d.children)}}if(i!=""){break}}};r(x);return i};s.find("thead tr").each(function(t,a){e(a).find("th").each(function(a,n){var i=e(n);var r={id:t+"_"+a,name:i.html(),view:k(i),th_index:a,layer:t,colspan:i.attr("colspan"),maxColspan:i.attr("maxColspan"),rowspan:i.attr("rowspan"),children:[]};if(t==0){x.push(r)}else{var o=C(t,a);if(o!=""){o.children.push(r)}}})});T(x);return x}}else{var _=e("<div style = 'position:relative;clear:both;'></div>");if(c!="100%"){if(r.lockTable.lockRow==0){_=e("<div style = 'position:relative;clear:both;overflow-x:auto;height:100%;'></div>")}else{_=e("<div style = 'position:relative;clear:both;overflow-x:auto;overflow-y:hidden;height:100%;'></div>")}}s.wrap(_);var $=function(){s.bind(g,function(t,a){var n=e("#"+o);n.an_tableSetView(n,a);var i=n.parent().parent().parent().height();var r=n.parent().parent().parent().width();n.an_tableLayout(n,r,i)});s.bind(v,function(t,a){var n=e("#"+o);n.an_tableLock({table:o,lockRow:a.lockRow,lockColumn:a.lockColumn,width:c,height:d});if(a.lockRow>0){n.parent().parent().css("overflow-y","hidden")}var i=n.parent().parent().parent().height();var r=n.parent().parent().parent().width();n.an_tableLayout(n,r,i)});var t=r.lockTable.lockRow;var a=r.lockTable.lockColumn;if(m&&s.find("thead").children().length>0){t=s.find("thead").children().length;r.lockTable.lockRow=t}if(t>=1||a>=1){s.an_tableLock({table:o,lockRow:t,lockColumn:a,width:c,height:d})}var n=s.parent().parent().parent().height();var i=s.parent().parent().parent().width();s.an_tableLayout(s,i,n);s.on("click",function(t){var a=e(t.target);var n=a.parent();r.onClickRow(n.index(),n);r.onClickCell(a.index(),a)});s.on("dblclick",function(t){var a=e(t.target);var n=a.parent();r.onDblClickRow(n.index(),n);r.onDblClickCell(a.index(),a)})};if(r.bodyUrl!=""){s.an_creatDataList(r,function(){$()})}else{$()}}},an_creatDataList:function(t,a){var n=e(this);var i=t.bodyUrl;var r=t.ajaxType;var o=function(e){var t="";for(var a in e){if(a=="children"){t=e[a]}}return t};var s=function(e){var t=n.find("tbody");var a=e.rows;var i=e.rows_align||false;var r=e.rows_class;for(var s=0;s<a.length;s++){var l="<tr>";var d=a[s];for(var c in d){var f="";var u="";var h="";if(i&&i[0][c]){f=i[0][c]}if(r&&r[0][c]=="tree"){var v=o(d);if(v!=""){u="group n1";h="childrenUrl = "+v}else{u="node n1"}}if(c!="children"){l+="<td align = '"+f+"' class = '"+u+"' "+h+">"+d[c]+"</td>"}}3;l+="</tr>";t.append(l)}};if(typeof i=="string"){if(r=="get"){andy.loaddata(i,function(e){s(e);a()})}else if(r=="post"){andy.postdata(i,function(e){s(e);a()})}}else if(typeof i=="object"){s(i);a()}},an_tableInsertList:function(t,a){var n=t.parent();var i=function(e){var t="";for(var a in e){if(a=="children"){t=e[a]}}return t};for(var r=0;r<a.length;r++){var o="<tr>";var s=a[r];var l=0;for(var d in s){var c="";var f="";var u="";var h="";n.children().each(function(t,a){var n=e(a);if(l==t){c=n.attr("align");if(n.hasClass("group")||n.hasClass("node")){f="node n2"}}});if(d!="children"){o+="<td align = '"+c+"' class = '"+f+"' childrenUrl = '"+h+"'>"+s[d]+"</td>"}l+=1}o+="</tr>";n.after(o)}},an_tableLayout:function(t,a,n){var i=17;var r=t[0].id;var o=t;var s="divBoxing-"+r;var l="divBoxingbody-"+r;var d="divBoxinghead-"+r;var c="divBoxingfixed-"+r;var f=e("#"+s);var u=e("#"+d);var h=e("#"+l);var v=e("#"+c);var p=e("#"+r+"_h");var g=e("#"+r+"_w");var m=n;var b=a;if(o.height()<=n){i=0}f.parent().width(b).height(m);f.width(b).height(m);u.width(f.width()-i);p.height(o.height());h.height(f.height()-i);g.width(o.width());var y=function(e,t){if(e.parent().is("td")){e.prop("checked",t);if(t){e.parents("tr").addClass("current")}else{e.parents("tr").removeClass("current")}}};var w=function(t,a,n){a.find("input").each(function(a,i){var r=e(i);if(typeof t!="number"||t==a){if(r.prop("checked")!=n){y(r,n)}}})};var x=function(e){if(f[0]){w("",f.find("table"),e)}else{w("",o,e)}w("",u.find("table"),e);w("",h.find("table"),e);w("",v.find("table"),e)};var T=function(e,t){if(f[0]){w(e,f.find("table"),t)}else{w(e,o,t)}w(e,u.find("table"),t);w(e,h.find("table"),t);w(e,v.find("table"),t)};var k=function(e,t){var a=e.children("."+t);var n=a.attr("class");return n};var C=function(e,t){var a=k(e,t);var n=a.split(" ");var i=n[1].substr(0,1);var r=parseInt(n[1].substr(1,n.length));return r};var _=function(e){var t=k(e,"node");var a=t.split(" ");var n=a[1].substr(0,1);var i=parseInt(a[1].substr(1,a.length));if(i>=1){i-=1}var r=e.prevAll(".group"+n+i).first();if(i==0){r=null}return r};var $=function(t,a,n,i){var r=t.attr("class");if(r&&r.substr(0,r.length-1)==a.substr(0,a.length-1)&&r.substr(r.length-1,r.length)>a.substr(a.length-1,a.length)){if(i){e(t).css("display","")}else{e(t).css("display","none")}}else if(!r){if(i){var o=_(t);if(o&&o.children("td").hasClass("open")){e(t).css("display","")}}else{var o=_(t);var s=C(n,"group");var l=C(t,"node");if(o&&o.children("td").hasClass("open")==false||l>s){e(t).css("display","none")}}}};var E=function(t){t.find("input").each(function(t,a){var n=e(a);if(n.parent().is("th")||n.parent().is("td")){n.unbind("click");n.click(function(e){if(n.prop("checked")){n.parents("tr").addClass("current");T(t,true);if(n.parent().is("th")){x(true)}}else{n.parents("tr").removeClass("current");T(t,false);if(n.parent().is("th")){x(false)}}})}});t.find(".group").each(function(i,r){var s=e(r);var l=s.parent();var d=s.attr("class");var c=d.split(" ");d=c[0]+c[1];l.addClass(d);s.unbind("click");s.click(function(i){var r=e(i.target);if(r.find("span").hasClass("quarters-loader")){return false}var s=r.parent();var l=s.attr("class").split(" ")[0];var d="<span class='quarters-loader' style = 'width:18px;height:18px;margin-left:8px'></span>";var c=false;if(r.hasClass("open")){c=false;r.removeClass("open")}else{c=true;r.addClass("open")}if(r.attr("childrenUrl")){r.append(d);andy.loaddata(r.attr("childrenUrl"),function(e){r.find("span").remove(".quarters-loader");o.an_tableInsertList(r,e);r.attr("childrenUrl","");t.an_tableLayout(t,a,n)})}else{s.nextUntil("."+l).each(function(t,a){$(e(a),l,s,c)});var f=u.find("tbody tr").eq(s.index());f.nextUntil("."+l).each(function(t,a){$(e(a),l,f,c)});var p=h.find("tbody tr").eq(s.index());p.nextUntil("."+l).each(function(t,a){$(e(a),l,p,c)});var g=v.find("tbody tr").eq(s.index());g.nextUntil("."+l).each(function(t,a){$(e(a),l,g,c)});var m=o.parent().parent().parent().height();var b=o.parent().parent().parent().width();o.an_tableLayout(o,b,m)}})})};if(f[0]){E(f.find("table"))}else{E(o)}E(u.find("table"));E(h.find("table"));E(v.find("table"))},an_tableLock:function(t){var a=e.extend({table:"lockTable",lockRow:0,lockColumn:0,width:"100%",height:"100%",lockRowCss:"lockRowBg",lockColumnCss:"lockColumnBg"},t);var n=a.table;var i=e("#"+n);var r="an-datagrid";var o="divBoxing-"+n;var s="divBoxingbody-"+n;var l="divBoxinghead-"+n;var d="divBoxingfixed-"+n;var c=50;var f=1;var u=100;var h=e("<div id='"+o+"'></div>").scroll(function(e){if(e.target.scrollTop>0){g.css({"z-index":f});p.css({"z-index":c})}if(e.target.scrollLeft>0){g.css({"z-index":c});p.css({"z-index":f})}g.stop().animate({scrollTop:e.target.scrollTop+"px"},0);p.stop().animate({scrollLeft:e.target.scrollLeft+"px"},0)});h.css({width:a.width,height:a.height,overflow:"auto",position:"relative",clear:"both"});i.wrap(h);i.addClass("tbLock");var v=e("#"+o);v.after("<div id = '"+l+"'></div>");v.after("<div id = '"+s+"'></div>");v.after("<div id = '"+d+"'></div>");var p=e("#"+l);var g=e("#"+s);var m=e("#"+d);var b=a.lockRow*a.lockColumn;var y=17;var w=0;var x=0;if(a.lockRow>0){var T;for(var k=0;k<a.lockRow;++k){T=i.find("thead tr:eq("+k+") >th").addClass("LockRow").addClass(a.lockRowCss);if(!T[k]){T=i.find("tbody tr:eq("+k+") >td").addClass("LockRow").addClass(a.lockRowCss)}var C=T[k].offsetHeight;if(e(T[k]).attr("rowspan")){C=C/parseInt(e(T[k]).attr("rowspan"))}w+=C;for(var _=0;_<a.lockColumn;++_){if(T){i.find("thead tr th:eq("+_+")").addClass("LockCell");T.find("td:eq("+_+")").addClass("LockCell").addClass(a.lockRowCss)}}}}if(a.lockColumn>0){var $=e("#"+n+" tr").length;var T,E;for(var k=a.lockRow;k<$;++k){T=i.find("tr:eq("+k+")");E=i.find("thead tr:eq(0) >th");for(var _=0;_<a.lockColumn;++_){if(k==a.lockRow){x+=E[_].offsetWidth}T.find("td:eq("+_+")").addClass("LockCell").addClass(a.lockColumnCss)}}}var I=v.width()-y;p.width(I);var E=i.clone().attr({id:n+"_h"});E.removeAttr(r);E.height(i.height());p.css({position:"absolute",top:"0px",left:"0px",overflow:"hidden"});p.height(w);p.append(E);g.css({position:"absolute",top:"0px",left:"0px",overflow:"hidden"});var S=v.height()-y;g.height(S);var D=i.clone().attr({id:n+"_w"});D.removeAttr(r);D.width(i.width());g.width(x);g.append(D);m.css({position:"absolute",top:"0px",left:"0px",overflow:"hidden"});m.css({"z-index":u});var A=i.clone().attr({id:n+"_f"});A.removeAttr(r);m.width(x).height(w);m.append(A);A.width(i.width()).height(i.height());if(w>0&&x>0){i.bind("layout",function(){var e=v.parent().parent().height();var t=v.parent().parent().width();v.parent().width(t).height(e);v.width(t).height(e);A.width(i.width()).height(i.height());p.width(v.width()-y);E.height(i.height());g.height(v.height()-y);D.width(i.width())})}},an_tableSetView:function(t,a){var n=t[0].id;var i=t;var r="an-datagrid";var o="divBoxing-"+n;var s="divBoxingbody-"+n;var l="divBoxinghead-"+n;var d="divBoxingfixed-"+n;var c=e("#"+o);var f=e("#"+l);var u=e("#"+s);var h=e("#"+d);var v=i.an_datagrid("getHeadJson",i);var p=function(t){var n=function(){var n=0;var i="";var r="";var o=function(e){for(var t=0;t<e.length;t++){var s=e[t];if(a.layer==s.layer){if(a.jsonIndex==n){i=s;break}}if(s.children.length>0){r=s;o(s.children)}else{n+=1}if(i!=""){break}}};o(v);var s=0;for(var l=0;l<r.children.length;l++){var d=r.children[l];if(d.view=="open"){s+=1}}t.find("thead tr").each(function(t,a){e(a).find("th").each(function(a,n){if(t==parseInt(r.layer)&&a==parseInt(r.th_index)){if(s>0){e(n).removeClass("f-hidden");e(n).attr("colspan",s);r.view="open"}else if(s==0){e(n).addClass("f-hidden");r.view="close"}}})})};var r=function(){var n=0;var i="";var r="";var s="";var l=function(e){for(var t=0;t<e.length;t++){var o=e[t];if(a.layer==o.layer){if(a.jsonParentIndex==o.jsonParentIndex){i=o;break}}if(o.children.length>0){r=o;n+=1;l(o.children)}if(i!=""){break}}};var d=function(a){for(var n=0;n<a.children.length;n++){var i=a.children[n];t.find("thead tr").each(function(t,n){e(n).find("th").each(function(n,r){if(t==parseInt(i.layer)&&n==parseInt(i.th_index)){var s=e(r);if(a.view=="open"){s.removeClass("f-hidden");i.view="open"}else{s.addClass("f-hidden");i.view="close"}o(i)}})});if(i.children.length>0){d(i.children)}}};var c=function(e){var t=0;for(var a=0;a<e.children.length;a++){var n=e.children[a];if(n.view=="open"){t+=1}}return t};l(v);d(i);if(c(i)>0){t.find("thead tr").each(function(t,a){e(a).find("th").each(function(a,n){if(t==parseInt(i.layer)&&a==parseInt(i.th_index)){var r=e(n);e(n).attr("colspan",c(i))}})})}};var o=function(a){t.find("tbody tr").each(function(t,n){e(n).find("td").each(function(t,n){if(t==parseInt(a.jsonIndex)){if(a.view=="open"){e(n).removeClass("f-hidden")}else{e(n).addClass("f-hidden")}}})})};var s=t.find("thead tr").length;t.find("thead tr").each(function(t,l){e(l).find("th").each(function(l,d){if(t==parseInt(a.layer)&&l==parseInt(a.th_index)){if(e(d).hasClass("f-hidden")){e(d).removeClass("f-hidden");a.view="open"}else{e(d).addClass("f-hidden");a.view="close"}v=i.an_datagrid("getHeadJson",i);o(a);if(t>0){n()}else if(t<s-1){r()}}})})};if(c.length>0){p(c);p(f);p(u);p(h)}else{p(i)}},an_tableView:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e(this);var o=r.attr("id")+"_dialog";var s=r.attr("id")+"_tree";var l="EVENT_GET_JSON";if(a!=""){if(a=="getJson"){var d=arguments[1];r.trigger(l,d)}}else{var c=e.extend({width:400,height:430,setHeadJson:"",postUrl:"",postSuccess:function(){},onTreeCheck:function(){}},t);var f="<div class='u-p-l-bottom u-upload-bot' style = 'width:100%;height:40px;background:#EEE;position:absolute;bottom:0px;left:0px;_top:"+(c.height-45)+"px;_left:5px;_z-index:10000;'>"+"<div class='f-right f-p-xs'>"+"<a href='javascript:;' class='u-button-default success submit' id = 'submit_btn' style='float:left; margin-left:10px;'>确认</a>"+"</div></div>";e(document).an_dialog({id:o,aniClose:false,locMyself:true,onBeforeClose:function(){return true},title:"显示隐藏列",html:"<div class='' style = 'height:"+(c.height-85)+"px;overflow-y:auto'><ul id='"+s+"' class='ztree'></ul></div>"+f,width:c.width,height:c.height});dialog=e("#"+o);var u=dialog.find("#submit_btn");var h=false;var v=function(e){r.an_datagrid("tableView",e)};var p=function(t){var a=e.fn.zTree.getZTreeObj(s);var n=a.getNodeByParam("id",t.id);a.checkNode(n,true,false)};var g=function(t,a,n){var i={treeObj:null,callback:{onCheck:function(e,t,a){c.onTreeCheck(a);v(a)}},check:{enable:true,chkStyle:"checkbox",chkboxType:{Y:"sp",N:"sp"}},data:{simpleData:{enable:true}}};if(a){i=e.extend(i,a)}var r="";if(n){e.fn.zTree.init(e("#"+t),i,n);r=e("#"+t);for(var o=0;o<n.length;o++){if(n[o].view=="close"){p(n[o])}}}else if(op&&op.url){}};u.on("click",function(t){if(h){return true}h=true;if(c.postUrl==""){h=false;dialog.an_dialog("close")}else{var a=r.an_datagrid("getHeadJson",r);e.post(c.postUrl,a,function(e,t,a){if(t=="success"){alert("状态已经保存");c.postSuccess();h=false;dialog.an_dialog("close")}else{alert(a);h=false}})}});r.bind(l,function(e,t){var a=r.an_datagrid("getHeadJson",r);t(a)});var m=r.an_datagrid("getHeadJson",r);g(s,null,m)}}})})(jQuery);(function(e){e.fn.extend({an_tabs:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({index:1,fit:true,height:0,width:0,hidden:"",onClick:function(){}},t);var o={head:"m-tabs-header",body:"m-tabs-content",layouted:"layouted",hidden:"f-hidden",item:"item",active:"activate",headTop:"head-top",headLeft:"head-left",headRight:"head-right",headBottom:"head-bottom"};var s=e(this);var l=e(this).children("."+o.head);var d=e(this).children("."+o.body);var c=d.children("."+o.item);

var f="SHOW_EVENT";var u=s.attr("options");if(u){u=u.split(",");for(var n=0;n<u.length;n++){var h=u[n].split(":");var v=h[0];var p=h[1];if(v=="show"){r.index=p}else if(v=="hidden"){r.hidden=p}else if(v=="fit"){if(p=="false"){r.fit=false}}else if(v=="width"){r.width=parseInt(p)}else if(v=="height"){r.height=parseInt(p)}}}s.data("fit",r.fit);var g=function(t){d.children().each(function(a,n){var i=e(n);if(t==a){if(!i.hasClass(o.active)){i.addClass(o.active)}if(!i.hasClass(o.layouted)){andy.layout(i);i.addClass(o.layouted)}}else{i.removeClass(o.active)}})};var m=function(e){if(r.hidden!=""){if(typeof r.hidden[e]=="number"){return r.hidden[e]}}else{return 1}};if(a!=""){if(a=="hidden"){var b=function(e){var t=0;for(var a=0;a<e.length;a++){if(e[a]==1){t=a;break}}return t};var y=arguments[1];var w=b(y);r.hidden=y;g(w);l.find("li").each(function(t,a){var n=e(a);n.removeClass();if(m(t)==0){n.hide()}else if(m(t)==1){n.show();if(t==w){n.toggleClass(o.active)}}})}else if(a="show"){var x=parseInt(arguments[1]);if(x<0){x=0}s.trigger(f,x)}}else{if(e(this)[0]){e(this)[0].option=r}var T="";var k="";var C=parseInt(d.css("padding-left"));if(!C){C=0}var _=parseInt(d.css("border-left"));if(!_){_=0}var $=parseInt(d.css("border-bottom"));if(!$){$=0}var E=0;var I=0;if(!s.hasClass(o.headTop)&&!s.hasClass(o.headLeft)&&!s.hasClass(o.headRight)&&!s.hasClass(o.headBottom)){E=l.outerHeight()}else if(s.hasClass(o.headTop)){E=l.outerHeight()}else if(s.hasClass(o.headLeft)){I=l.outerWidth()}else if(s.hasClass(o.headRight)){I=l.outerWidth()}else if(s.hasClass(o.headBottom)){E=l.outerHeight()}var w=function(t){l.children("ul").children().each(function(a,n){var i=e(n);if(t==a){if(!i.hasClass(o.active)){i.toggleClass(o.active)}}else{if(m(a)==0){i.hide()}i.removeClass()}});g(t)};var S=function(){if(s.children().find(o.head)){w(r.index-1)}l.find("li").each(function(t,a){var n=e(a);n.is("li")||(n=n.closest("li"));n.click(function(e){w(t);r.onClick(e);s.trigger(andy.EVENT_CLICK,t+1)})})};var D=function(){var t=s.parent().height();var a=s.parent().width();s.outerHeight(t).outerWidth(a);d.outerHeight(t-E).outerWidth(a-I);var n=d.height();var i=d.width();d.children().each(function(t,a){var r=e(a);r.outerHeight(n).outerWidth(i)})};s.bind(f,function(e,t){w(t)});if(!s.data("fit")){var A=s.parent().height();var R=s.parent().width();if(r.height>0){A=r.height}if(r.width>0){R=r.width}s.outerHeight(A).outerWidth(R);d.outerHeight(A-E).outerWidth(R-I);var N=d.height();var O=d.width();d.children().each(function(t,a){var n=e(a);n.outerHeight(N).outerWidth(O)})}else{D();s.bind("layout",function(){D()})}S()}}})})(jQuery);(function(e){e.fn.extend({switchs:function(){var t=function(e,t){var a,n;e.find("i").remove();e.removeClass("on off");t?a='<i class="iconfont ">&#xe61c;</i>':a='<i class="iconfont ">&#xe61d;</i>';t?n="on":n="off";e.addClass(n).append(a).addClass("switchState")};Config={init:function(a){var n={changeBefor:function(e){},changeAfter:function(e){}};var i=e(this),r=i.children("input"),o=r.is(":checked")?true:false;if(!i.hasClass("switchState")){t(i,o)}var s=e.extend(true,n,a||{});i.unbind("click");i.on("click",function(a){a.stopPropagation();s.changeBefor(r);if(r.prop("disabled"))return;var n=r.is(":checked");r.prop("checked",!n);t(e(this),!n);s.changeAfter(r)})},setEnable:function(){e(this).children("input").prop("disabled",arguments[1])},setState:function(){t(e(this),arguments[1]);e(this).children("input").prop("checked",arguments[1])}};var a=arguments[0];if(Config[a]){a=Config[a]}else if(typeof a=="object"||!a){a=Config.init}else{e.error("Something bad happened");return this}return a.apply(this,arguments)}})})(jQuery);(function(e,t){var a=1;var n=function(e){if(e===""){return}if(typeof e==="string"){var t=e.split("-");if(t.length===3&&t[0].length===4){var a=~~t[0];var n=~~t[1]-1;var i=~~t[2];var r=new Date(a,n,i);return r.getFullYear()===a&&r.getMonth()===n&&r.getDate()===i}}return false};var i=function(e){var t=new Array("~","`","!","@","#","$","%","^","&","*","{","}","[","]","(",")");t.push(":",";","'","|","\\","<",">","?","/","<<",">>","||","//");t.push("admin","administrators","administrator","管理员","系统管理员");t.push("select","delete","update","insert","create","drop","alter","trancate");e=e.toLowerCase();for(var a=0;a<t.length;a++){if(e.indexOf(t[a])>-1){return false}}return true};var r=function(e){e=e.toUpperCase();var t={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "};if(!t[e.substr(0,2)]){return false}if(!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(e)){return false}var a,n;a=e.length;if(a==15){n=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/);var i=e.match(n);var r=new Date("19"+i[2]+"/"+i[3]+"/"+i[4]);var o;o=r.getYear()==Number(i[2])&&r.getMonth()+1==Number(i[3])&&r.getDate()==Number(i[4]);if(!o){return false}else{var s=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2);var l=new Array("1","0","X","9","8","7","6","5","4","3","2");var d=0,c;e=e.substr(0,6)+"19"+e.substr(6,e.length-6);for(c=0;c<17;c++){d+=e.substr(c,1)*s[c]}e+=l[d%11];return true}}if(a==18){n=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/);var i=e.match(n);var r=new Date(i[2]+"/"+i[3]+"/"+i[4]);var o;o=r.getFullYear()==Number(i[2])&&r.getMonth()+1==Number(i[3])&&r.getDate()==Number(i[4]);if(!o){return false}else{var f;var s=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2);var l=new Array("1","0","X","9","8","7","6","5","4","3","2");var d=0,c;for(c=0;c<17;c++){d+=e.substr(c,1)*s[c]}f=l[d%11];if(f!=e.substr(17,1)){return false}return true}}return false};var o={trim:{check:function(e){e.value=e.value.replace(/(^\s*)|(\s*$)/g,"");return true}},required:{message:"不能为空",placeholder:"请输入文字...",check:function(e){return e.value!==""&&e.value!==o.required.placeholder}},"int":{message:"不是整数，请输入整数",placeholder:"请输入整数",check:function(e){return/^\-?\d+$/.test(e.value)}},mobile:{message:"手机号码不合法",placeholder:"请输入手机号",check:function(e){return/^(13[0-9]|14[57]|15[012356789]|17[0678]|18[0-9])\d{8}$/.test(e.value)}},phone:{message:"座机号码不合法",placeholder:"请输入座机号",check:function(e){var t=/^[0][1-9]{2,3}-[0-9]{5,10}$/;var a=/^[1-9]{1}[0-9]{5,8}$/;if(e.value.length>9){return t.test(e.value)}return a.test(e.value)}},mobile_phone:{message:"输入号码不合法",placeholder:"请输入手机或者座机号",check:function(e){return o.phone.check(e)||o.mobile.check(e)}},decimal:{message:"不是小数，请输入小数",placeholder:"请输入小数",check:function(e){return/^\-?\d*\.?\d+$/.test(e.value)}},alpha:{message:"包含字母以外的非法字符",placeholder:"请输入字母",check:function(e){return/^[a-z]+$/i.test(e.value)}},alpha_numeric:{message:"包含字母或数字以外的非法字符",placeholder:"请输入字母或数字",check:function(e){return/^[a-z0-9]+$/i.test(e.value)}},alpha_dash:{message:"包含字母或数字及下划线以外的非法字符",placeholder:"请输入字母或数字及下划线等字符",check:function(e){return/^[a-z0-9_\-]+$/i.test(e.value)}},chs:{message:"请输入中文字符",placeholder:"请输入中文字符",check:function(e){return/^[\u4e00-\u9fa5]+$/.test(e.value)}},chs_numeric:{message:"请输入中文字符或数字及下划线等特殊字符",placeholder:"请输入中文字符或数字及下划线等特殊字符",check:function(e){return/^[\\u4E00-\\u9FFF0-9_\-]+$/i.test(e.value)}},qq:{message:"腾讯QQ号从10000开始",placeholder:"请输入QQ号",check:function(e){return/^[1-9]\d{4,10}$/.test(e.value)}},postoffice:{message:"邮编格式错误",placeholder:"请输入邮编",check:function(e){return/^[1-9][0-9]{5}$/.test(e.value)}},idcard:{message:"身份证格式错误",placeholder:"请输入身份证号",check:function(e){return r(e.value)}},ipv4:{message:"ip地址不正确",placeholder:"请输入ip地址",check:function(e){var t=/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i;return t.test(e.value)}},email:{message:"邮箱地址错误",placeholder:"请输入邮箱",check:function(e){return/^([A-Z0-9]+[_|\_|\.]?)*[A-Z0-9]+@([A-Z0-9]+[_|\_|\.]?)*[A-Z0-9]+\.[A-Z]{2,3}$/i.test(e.value)}},url:{message:"URL格式错误",placeholder:"请输入链接",check:function(e){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(e.value)}},quote:{message:"包含非法字符",placeholder:"请输入...",check:function(e){return i(e.value)}},repeat:{message:"密码输入不一致",check:function(e){var t=e.getAttribute("repeat");if(t){var a=e.ownerDocument.getElementById(t)}if(!a){return false}return e.value===a.value}},norepeat:{message:"输入重复",check:function(e){var a=true,n,i,r=e.getAttribute("norepeat");if(r&&o.required.check(e)){var s=t('[norepeat="'+r+'"]');if(s.length>0){for(n=0;n<s.length;n++){i=s[n];if(e!==i&&o.required.check(i)&&e.value===i.value){a=false;break}}}}return a}},date:{message:"必须符合日期格式 YYYY-MM-DD",placeholder:"请输入日期 例如：2016-3-2",check:function(e){return n(e.value)}},passport:{message:"护照格式错误或过长",placeholder:"请输入护照号",check:function(e){return/^[a-zA-Z0-9]{4,20}$/i.test(e.value)}},minlength:{message:"最少输入{{minlength}}个字",placeholder:"请输入{{minlength}}个以上字符",check:function(e){var t=e;var a=parseInt(t.getAttribute("minlength"),10);return t.value.length>=a}},maxlength:{message:"最多输入{{maxlength}}个字",placeholder:"请输入{{maxlength}}个以下字符",check:function(e){var t=e;var a=parseInt(t.getAttribute("maxlength"),10);return t.value.length<=a}},greaterthan:{message:"请输入大于{{greaterthan}}的数字",placeholder:"请输入大于{{greaterthan}}的数字",check:function(e){var t=e;var a=parseInt(t.getAttribute("greaterthan"),10);var n=parseFloat(t.value);return isNaN(n)?false:n>a}},lessthan:{message:"请输入小于{{lessthan}}的数字",placeholder:"请输入小于{{lessthan}}的数字",check:function(e){var t=e;var a=parseInt(t.getAttribute("lessthan"),10);var n=parseFloat(t.value);return isNaN(n)?false:n<a}},contains:{message:"必须包含{{contains}}中的一个",placeholder:"必须包含{{contains}}中的一个",check:function(e){var t=e.value;var a=[].concat(t).map(String);var n=(e.getAttribute("contains")||"").split(",");var i=false;for(var r=0,o=a.length;r<o;r++){var s=a[r];if(n.indexOf(s)>=0){i=true;break}}return i}},contain:{message:"必须包含{{contain}}",placeholder:"请输入包含{{contain}}这样格式的字符",check:function(e){var t=e.value;var a=[].concat(t).map(String);var n=(e.getAttribute("contain")||"").split(",");if(!a.length){var i=false}else{i=true;for(var r=0,o=n.length;r<o;r++){var s=n[r];if(a.indexOf(s)===-1){i=false;break}}}return i}},pattern:{message:"必须匹配/{{pattern}}/这样的格式",placeholder:"请输入匹配/{{pattern}}/这样格式的字符",check:function(e){var t=e;var a=t.getAttribute("pattern");var n=new RegExp("^(?:"+a+")$");return n.test(t.value)}}};var s=function(e){var a=t(e),n;var i=a.attr("placeholder");if(!i){return}a.parent().append("<div class='ie-placeholder place'>"+i+"</div>");n=a.parent().find(".ie-placeholder");if(a[0].value==""){n.show()}else{n.hide()}n.click(function(e){t(this).hide();var a=t(this).parent().find("[placeholder]");a[0].click();a[0].focus()});a.blur(function(){if(t(this).val()==""){t(this).parent().find(".ie-placeholder").show()}});a.focus(function(){t(this).parent().find(".ie-placeholder").hide()})};var l=function(e){t(e).addClass("cor")};var d=function(e){t(e).addClass("err");setTimeout(function(){t(e).addClass("err1")},3e3)};var c=function(e){t(e).removeClass("err cor err1")};var f=function(a){var n,i=true,r,s,f="",u=a.getAttribute("verify");if(!u){return true}if(t(a).is(":disabled")){return true}if(a.value===""&&u&&u.indexOf("required")<0){return true}u=u.split(",");for(s=0;s<u.length;s++){r=o[u[s]].check(a);if(r===false){if(a.getAttribute("message")){f=a.getAttribute("message")}else{f=o[u[s]].message;if(f.indexOf(u[s])>-1){f=f.replace("{{"+u[s]+"}}",a.getAttribute(u[s]))}}n=t(a).next(".infobox");e.changeTooltip(a,f);e.showTooltip(a,true);d(a);return r}i=i&&r}if(i){c(a);e.hideTooltip(a);l(a)}else{d(a)}return i};var u=function(a,n){if(a.getAttribute("tipPos")){e.tooltip(t(a),a.getAttribute("tipPos"),t(a).attr("title"),"terr")}else{e.tooltip(t(a),"bottom",t(a).attr("title"),"terr")}var i=function(e){return n?n(e.target):f(e.target)};if(a.getAttribute("validateOnKeyup")){t(a).keyup(i)}else if(a.getAttribute("validateOnblur")){t(a).blur(i)}else{t(a).change(i)}t(a).unbind("focus");t(a).bind("focus",function(a){c(t(this));e.hideTooltip(this)})};var h=function(){t("[verify]").each(function(a,n){if(n.getAttribute("verify")===""){return}if(n.parentNode.className.indexOf(".m-tooltip")<0){var i=n.getAttribute("verify").split(",");u(n);if((i+"").indexOf("required")>-1){t(n).parents(".u-formitem").find("label").append("<span class='f-color-danger'>*</span>")}if(!n.getAttribute("placeholder")){var r=o[i[i.length-1]].placeholder;if(r){if(r.indexOf("{{")>-1){r=r.replace("{{"+i[i.length-1]+"}}",n.getAttribute(i[i.length-1]))}n.setAttribute("placeholder",r)}}}if(e.IE()<=9&&e.IE()!==0){s(n)}})};e.fromInit=h;e.addVerify=function(e,n){var i,r,s={massage:"输入不合法",check:function(){return true}};i=t.extend(s,n);r="custom"+a;o[r]=i;e.setAttribute("verify",e.getAttribute("verify")?e.getAttribute("verify")+","+r:r);u(e,i.check);a++};e.ajaxVerify=function(a,n){var i,r,o={async:false,type:"get",url:"",data:{},dataType:"json",beforeSend:function(){},complete:function(){},success:function(){},error:function(){}};if(n){i=t.extend(o,n);i.success=function(t){if(t.success){l(a)}else{if(tipStr){e.changeTooltip(a,tipStr);e.showTooltip(a,true)}d(a)}if(n.success){n.success(t)}};i.error=function(e){alert("error"+e.toString())};u(a,function(e){i.data=n.data?n.data():e.value;t.ajax(i)})}};e.fromVerify=function(e){var a=true;t(e).find("[verify]").each(function(e,t){a=f(t)&&a});return a};e.inputCheck=f;e.placeholder4IE=s;t(document).ready(function(){h()})})(andy,jQuery);(function(e){e.fn.extend({an_accordion:function(t){var a=e.extend({index:1,isAnimation:true,multiple:false,isAllOpen:false,fit:true,height:0,width:0,onClick:function(){}},t);var n={head:"panel-head",body:"panel-body",title:"panel-head-title",hidden:"f-hidden",active:"activate"};var i=e(this);var r=i.children().children("."+n.head);var o=i.children().children("."+n.body);var s=function(t){var i=a.index;if(t){i=t}o.each(function(t,r){var o=e(r);if(i>0&&i==t+1){if(a.isAnimation){if(a.multiple){o.slideToggle(200)}else{o.slideDown(200)}}else{if(a.multiple){o.toggleClass(n.hidden)}else{o.removeClass(n.hidden)}}}else{if(!a.multiple){if(a.isAnimation){o.slideUp(200)}else{o.addClass(n.hidden)}}}})};var l=function(t){o.each(function(t,n){var i=e(n);if(i.css("display")=="block"&&a.multiple){}});s(t)};var d=function(){if(a.multiple||!a.isAllOpen){o.each(function(t,i){var r=e(i);if(a.index>0&&a.index==t+1){if(a.isAnimation){r.slideDown(200)}}else{if(a.isAnimation){r.slideUp(200)}else{r.addClass(n.hidden)}}})}else{s()}};var c=function(){if(o){d()}r.each(function(t,n){e(n).click(function(n){s(t+1);r.each(function(t,a){e(a).removeClass("activate")});e(this).addClass("activate");a.onClick(n)})})};c()}})})(jQuery);(function(e){e.fn.extend({an_pagination:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[n];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}if(a!=""){if(a=="total"){e(this).trigger("total",t.total)}if(a=="select"){e(this).trigger("select")}}else{var r=e.extend({index:1,total:100,selectListIndex:1,list:[10,20,30,40,50],onSelectPage:function(){}},t);var o=e(this);var s=o.find("[page-fist]");var l=o.find("[page-prev]");var d=o.find("[page-next]");var c=o.find("[page-last]");var f=o.find("[page-select]");var u=o.find("[page-refresh]");var h=r.list[0];r.selectListIndex=parseInt(r.selectListIndex);if(r.selectListIndex>1||t.selectListIndex<=r.list.length+1){h=r.list[r.selectListIndex-1]}if(f){h=f.val()}var v=parseInt(r.index);var p=Math.ceil(parseInt(r.total)/h);var g=function(){var e=o.find("[page-counts]");var t=o.find("[page-record]");var a=o.find("[page-index]");if(e){e.text(p)}if(a){a.val(v)}if(t){t.text("共"+r.total+"条记录")}};o.find("[page-select]").change(function(t){r.onSelectPage(v,e(t.target).val());h=e(t.target).val();p=Math.ceil(r.total/h);if(v>p){v=1}g()});o.bind("select",function(e){r.onSelectPage(v,h)});o.bind("total",function(e,t){r.total=t;p=Math.ceil(r.total/h);if(v>p){v=1}g()});if(s){s.click(function(e){if(v!=1){v=1;g();r.onSelectPage(v,h)}})}if(l){l.click(function(e){if(v>1){v-=1;g();r.onSelectPage(v,h)}})}if(d){d.click(function(e){if(v<p){v+=1;g();r.onSelectPage(v,h)}})}if(c){c.click(function(e){if(v!=p){v=p;g();r.onSelectPage(v,h)}})}if(u){u.click(function(e){r.onSelectPage(v,h)})}g();return r}}})})(jQuery);(function(e){e.fn.extend({an_datagridPagination:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({dpId:"",url:"",ajaxType:"get",onClickRow:function(){},onDblClickRow:function(){},onClickCell:function(){},onDblClickCell:function(){}},t);var o=r.dpId;if(o==""){o=e(this).attr("id")}if(!o){o="datagrid_"+andy.getRandom(1e3);e(this).attr("id",o)}var s=e("#"+o);var l=s.attr("options");var d="";if(l){l="{"+l+"}";l=andy.stringToJson(l);for(var c in l){if(l[c]=="true"){r[c]=true}else if(l[c]=="false"){r[c]=false}else{r[c]=l[c]}}}var f;f="EVENT_LOAD_LIST";if(a!=""){if(a=="loadListData"){var u=arguments[1];var h=arguments[2];if(h!=false){h=true}var v={url:u,isNewPagination:h};s.trigger(f,v)}}else{var p=s.find("table");var g=s.find(".m-pagebar");var m=g.attr("id");var b=function(){if(g[0]){var e="<div class='f-left'> 每页显示"+"<select class='u-select xs auto' page-select>"+"<option>10</option>"+"<option>20</option>"+"<option>30</option>"+"<option>40</option>"+"<option>50</option>"+"</select>"+"<button class='u-btn xs texture' page-fist><i class='iconfont'>&#xe60e;</i></button>"+"<button class='u-btn xs texture' page-prev><i class='iconfont'>&#xe626;</i></button>"+"第<input type='text' style='width:50px' value='1' class='u-input xs auto' page-index>共<a page-counts>10</a>页"+"<button class='u-btn xs texture'><i class='iconfont' page-next>&#xe60f;</i></button>"+"<button class='u-btn xs texture'><i class='iconfont' page-last>&#xe60d;</i></button>"+"</div><div class='f-right' page-record>共2000记录</div>";g.append(e)}};var y=function(t){var a=e.extend(true,r,{bodyUrl:t});p.an_datagrid(a);if(t["total"]&&g.hasClass("promty")==false){var n={};var i={};n=e.extend(true,t,{onSelectPage:function(e,t){w(r.url+"?pageNumber="+e+"&pageSize="+t)}});g.empty();b();g.an_pagination(n);g.addClass("promty")}};var w=function(e){p.find("tbody").empty();if(r.ajaxType=="get"){andy.loaddata(e,function(e){y(e)})}else if(r.ajaxType=="post"){andy.postdata(e,function(e){y(e)})}};if(r.url!=""){w(r.url)}s.bind(f,function(e,t){if(t.isNewPagination){g.removeClass("promty")}w(t.url)})}}})})($);(function($){$.fn.extend({an_selector:function(){var options={},METHODS={};var funstyle="";for(var i=0;i<arguments.length;i++){var a=arguments[0];if(typeof a=="object"){options=a}else if(typeof a=="string"){funstyle=a}}if(funstyle!=""){if(METHODS[funstyle]){return METHODS[funstyle](this,arguments[1])}throw"The method of"+funstyle+"is undefined";return false}else{var _options=$.extend({treeid:"",selects:true,treeData:options.url||"",nodes:[],rightNodes:[],searchUrl:"",getUrl:"",searchText:"输入工号/名字",treeTitle:options.leftTitle||"部门结构",setting:"",submit:function(){}},options);var sel=$(this);var center=sel.find("[center]");var right=sel.find("[right]");var choose=sel.find("[choose]");var cancel=sel.find("[cancel]");var submit=sel.find("[submit]");var inputText=sel.find("[inputText]");var search=sel.find("[search]");var treeTitle=sel.find("[treeTitle]");var chooseData=[];var currentTreeNode="";if(treeTitle.length===0){var treeTitle=sel.find("[leftTitle]")}var default_setting={data:{simpleData:{enable:true}}};var setting={callback:{onClick:function(e,t,a){currentTreeNode=a;onTreeClick(currentTreeNode)}}};if(_options.setting!=""){setting=$.extend(true,setting,_options.setting,default_setting)}setting.callback.onClick=function(e,t,a){currentTreeNode=a;onTreeClick(currentTreeNode)};var tree="";if(_options.treeData==""){$.fn.zTree.init($("#"+_options.treeid),setting,_options.nodes);tree=$("#"+_options.treeid)}else{andy.loaddata(_options.treeData,function(e){e=andy.stringToJson(e);$.fn.zTree.init($("#"+_options.treeid),setting,e);tree=$("#"+_options.treeid)})}if(_options.rightNodes.length>0){for(var i=0;i<_options.rightNodes.length;i++){var data=_options.rightNodes[i];addToRight(data)}}if(treeTitle){treeTitle.text(_options.treeTitle)}if(choose){if(_options.selects==false){choose.addClass("f-hidden")}choose.click(function(){if(center){center.children().each(function(e,t){for(var a=0;a<chooseData.length;a++){if($(t).attr("id")==chooseData[a].id){clearSelf($(t));addToRight(chooseData[a])}}})}})}if(cancel){if(_options.selects==false){cancel.addClass("f-hidden")}cancel.click(function(){if(right){right.children().each(function(e,t){clearSelf($(t));changeCenterFrame(chooseData)})}})}if(submit){submit.click(function(){_options.submit(getChooseJson())})}if(search){search.click(function(){onTreeClick(currentTreeNode,true)})}if(inputText){inputText.attr("placeholder",_options.searchText);var ie=andy.getBrowser().browser.ie;if(ie&&ie<8){inputText.val(_options.searchText);inputText.blur(function(e){if($(e.target).val()==""){inputText.val(_options.searchText)}});inputText.focus(function(e){if($(e.target).val()==_options.searchText){inputText.val("")}})}}function onTreeClick(e,t){var a={},n=_options.getUrl;if(!n){n=t?_options.searchUrl:e.dataUrl}var i="";if(n!=""){if(inputText.val()!=_options.searchText&&t){a.search=inputText.val()}a.id=e.id;if(_options.clickTree){a=_options.clickTree(e)}if(n&&n!==""){andy.loaddata(n,a,function(e){e=andy.stringToJson(e);chooseData=e;changeCenterFrame(e)})}}}function changeCenterFrame(e){if(center||e){center.empty();for(var t=0;t<e.length;t++){var a=e[t];if(!checkId(right,a.id)){addToCenter(a)}}}}function addToCenter(e){if(center){if(checkDataId(chooseData,e.id)&&!checkId(center,e.id)){center.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"</button>");var t=$("#"+e.id);t.click(function(a){clearSelf(t);addToRight(e)})}}}function addToRight(e){if(right){if(!checkId(right,e.id)&&_options.selects){right.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"<i class='iconfont'>&#xe602;</i></button>");var t=$("#"+e.id);t.click(function(a){clearSelf(t);addToCenter(e)})}else if(_options.selects==false){right.children("button").each(function(e,t){var a=$(t);clearSelf(a);var n={id:a.attr("id"),name:a.attr("name"),data:a.attr("data")};addToCenter(n)});right.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"<i class='iconfont'>&#xe602;</i></button>");var t=$("#"+e.id);t.click(function(a){clearSelf(t);addToCenter(e)})}}}function checkId(e,t){var a=false;e.children().each(function(e,n){if(t==$(n).attr("id")){a=true}});return a}function checkDataId(e,t){var a=false;for(var n=0;n<e.length;n++){var i=e[n];if(t==i.id){a=true}}return a}function clearSelf(e){e.unbind("click");e.remove()}function getChooseJson(){var str="[";right.children().each(function(e,t){var a=$(t);var n="{'id':'"+a.attr("id")+"','name':'"+a.attr("name")+"','data':'"+a.attr("data")+"', 'tId':'"+a.attr("tId")+"'}";if(str=="["){str+=n}else{str+=","+n}});str+="]";var jstr=eval("("+str+")");return jstr}}},an_selectorTree:function(){var options={};var funstyle="";for(var i=0;i<arguments.length;i++){var a=arguments[0];if(typeof a=="object"){options=a}else if(typeof a=="string"){funstyle=a}}if(funstyle!=""){}else{var _options=$.extend({treeid:"",selects:true,treeData:options.url||"",nodes:[],rightNodes:[],treeTitle:options.leftTitle||"部门结构",submit:function(){}},options);var sel=$(this);var right=sel.find("[right]");var cancel=sel.find("[cancel]");var submit=sel.find("[submit]");var treeTitle=sel.find("[treeTitle]");var chooseData=[];var currentTreeNode="";var treeObject=$.fn.zTree.getZTreeObj(_options.treeid);if(treeTitle.length===0){var treeTitle=sel.find("[leftTitle]")}var setting={treeId:"1",treeObj:null,callback:{onCheck:function(e,t,a){onTreeCheck(a)}},check:{enable:true,chkStyle:"checkbox",chkboxType:{Y:"s",N:"s"}},data:{simpleData:{enable:true}}};if(_options.selects==false){setting.check={enable:true,chkStyle:"radio"}}var tree="";if(_options.treeData==""){$.fn.zTree.init($("#"+_options.treeid),setting,_options.nodes);tree=$("#"+_options.treeid);initRight()}else{andy.loaddata(_options.treeData,function(e){e=andy.stringToJson(e);$.fn.zTree.init($("#"+_options.treeid),setting,e);tree=$("#"+_options.treeid);initRight()})}function initRight(){if(_options.rightNodes.length>0){for(var e=0;e<_options.rightNodes.length;e++){var t=_options.rightNodes[e];addToRight(t);var a=$.fn.zTree.getZTreeObj(_options.treeid);var n=a.getNodeByParam("id",t.id);a.checkNode(n,true,false)}}}if(treeTitle){treeTitle.text(_options.treeTitle)}if(cancel){if(_options.selects==false){cancel.addClass("f-hidden")}cancel.click(function(){if(right){right.children().each(function(e,t){var a=$(t);var n=$.fn.zTree.getZTreeObj(_options.treeid);var i=a.attr("id");var r=n.getNodeByParam("id",i);removeToRight(r)})}})}if(submit){submit.click(function(){_options.submit(getChooseJson())})}function onTreeCheck(e){if(e){if(e.checked){goCheck(e,true)}else{goCheck(e,false)}}}function goCheck(e,t){if(e&&t){if(e.children&&_options.selects){addToRight(e);for(var a=0;a<e.children.length;a++){goCheck(e.children[a],t)}}else{addToRight(e)}}else if(!t){if(e.children){removeToRight(e);for(var a=0;a<e.children.length;a++){goCheck(e.children[a],t)}}else{removeToRight(e)}}}function addToRight(e){if(right){if(!checkId(right,e.id)&&_options.selects){right.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"<i class='iconfont'>&#xe602;</i></button>");var t=right.find("#"+e.id);t.click(function(t){removeToRight(e)})}else if(_options.selects==false){var a=$.fn.zTree.getZTreeObj(_options.treeid);right.children("button").each(function(e,t){var n=$(t).attr("id");var i=a.getNodeByParam("id",n);removeToRight(i)});right.append("<button class='u-btn sm' id = "+e.id+" data = "+e.data+" name = "+e.name+">"+e.name+"<i class='iconfont'>&#xe602;</i></button>");var t=right.find("#"+e.id);t.click(function(t){removeToRight(e)})}}}function removeToRight(e){var t=right.find("#"+e.id);clearSelf(t);var a=$.fn.zTree.getZTreeObj(_options.treeid);if(!e.tId){e=a.getNodeByParam("id",e.id)}a.checkNode(e,false,false)}function checkId(e,t){var a=false;e.children().each(function(e,n){if(t==$(n).attr("id")){a=true}});return a}function checkDataId(e,t){var a=false;for(var n=0;n<e.length;n++){var i=e[n];if(t==i.id){a=true}}return a}function clearSelf(e){e.unbind("click");e.remove()}function getChooseJson(){var str="[";right.children().each(function(e,t){var a=$(t);var n="{'id':'"+a.attr("id")+"','name':'"+a.attr("name")+"','data':'"+a.attr("data")+"'}";if(str=="["){str+=n}else{str+=","+n}});str+="]";var jstr=eval("("+str+")");return jstr}}}});andy.openSelectorDialog=function(e){var t,a={title:"人员选择",treeTitle:"部门结构",treeData:"/project/tsi/data/department.json",callback:function(e){}};t=$.extend({},a,e);$(document).an_dialog({id:"openSelector",width:e.width||823,height:455,title:t.title,url:e.url||(e.pathroot||""+"/andyui/admin/js/selector/selector.html"),data:t})};andy.initSelector=function(e){if(e.getAttribute("options")){var t=andy.stringToJson(e.getAttribute("options"));t.callback=function(a){t.rightNodes=a;andy.multiSelect({parent:$(e).find("[selectorListBox]")[0],dataKey:t.dataKey,onDelete:function(e){a.splice(e-1,1)},list:a})};$(e).find("[openSelector]").click(function(){if(e.className.indexOf("tree-selector")>0){t.url=t.pathroot||""+"/andyui/admin/js/selector/tree-selector.html";t.width=420}andy.openSelectorDialog(t)})}};$(document).ready(function(){$(".selector").each(function(e,t){andy.initSelector(t)})})})(jQuery);(function(e){e.fn.extend({an_combo:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({comboId:"",touchTargetType:"input",inputVerify:"",showTargetType:"list",inputName:"",showUrl:"",showData:[],checked:[],treeCheckBoxType:{},defaultValue:"下拉选择",treeId:"",selects:false,isEnable:true,isText:false,row:0,open:false,windowAuto:true,onChange:function(){}},t);var o=e(this);if(o.is("input")){var s=o.attr("id");o.removeAttr("id","");o.removeAttr("an-combo","");if(!s){s="combo_"+andy.getRandom(1e4)}var l=o.attr("style");o.removeAttr("style");r.inputName=o.attr("name");o.removeAttr("name");var d=o.attr("options");d="options = "+d;o.removeAttr("options","");var c="g-combo";if(o.attr("class")){c=o.attr("class");o.attr("class","")}o.attr("type","hidden");var f="<div class = '"+c+"' id = '"+s+"' style = '"+l+"' "+d+" an-combo></div>";o.before(f);o.remove();o=e("#"+s)}if(o.attr("an-combo")!="an-combo"){o.attr("an-combo","an-combo")}if(r.comboId==""){r.comboId=o.attr("id")}if(r.comboId==undefined){r.comboId="combo_"+andy.getRandom(1e4);o.attr("id",r.comboId)}o=e("#"+r.comboId);var u=e(document);var h=e(window);var v=0;var p="EVENT_ROW";var g="EVENT_SET_DEFAULT";var m="EVENT_GET_VALUE";var b="EVENT_GET_ID";var y="EVENT_SHOW";var w="EVENT_ENABLE";var x="EVENT_CHOOSE";var T="EVENT_TREE";var k="click";var C=true;var _=o.attr("options");var $="";if(_){_="{"+_+"}";_=andy.stringToJson(_);for(var E in _){if(E=="onChange"){var I=_[E];r.onChange=function(e){var t=andy.stringToJson(I);t(e)}}else if(E=="checked"){var S=_[E].split(",");r.checked=S}else{if(_[E]=="true"){r[E]=true}else if(_[E]=="false"){r[E]=false}else{r[E]=_[E]}}}}r.combo=o;r.valueForInput=null;o.find("input").each(function(t,a){if(e(a).attr("type")=="hidden"){r.valueForInput=e(a)}});if(a!=""){if(a=="row"){var D=arguments[1];if(o&&o[0]){o.trigger(p,D)}}else if(a=="setDefault"){o.trigger(g)}else if(a=="setCurrentChoose"){var A=arguments[1];var R={choose:A};o.trigger(x,R)}else if(a=="getValue"){var N=arguments[1];o.trigger(m,N)}else if(a=="getChooseId"){var N=arguments[1];o.trigger(b,N)}else if(a=="getShowTarget"){return andy.combo("getShowTarget",e("#"+r.comboId))}else if(a=="setShowTarget"){var O=arguments[1];o.trigger(y,O)}else if(a=="addTree"){var W=arguments[1];o.trigger(T,W)}else if(a=="isEnable"){var L=arguments[1];o.trigger(w,L)}}else{if(andy.IE()==6){o.find("ul").each(function(t,a){var n=e(a);if(!n.prev().is("div")){n.before("<div></div>")}})}var H=function(){var e=false;if(u.height()>h.innerHeight()){e=true}return e};var j=function(){if(o.showTarget.children().length>r.row&&r.row!=0){o.showTarget.addClass("u-overflow-y");v=r.row*o.showTarget.children().outerHeight();o.showTarget.height(v)}else{o.showTarget.removeClass("u-overflow-y");v=0;o.showTarget.css("height","")}};var B=function(e){if(e<o.showTarget.height()){o.showTarget.addClass("u-overflow-y");o.showTarget.outerHeight(e)}};var V=function(e,t){var a=e.offset();var n=a.left;var i=a.top;var s=u.width();var l=u.height();var d=u.scrollTop();var c=t.outerWidth();j();var f=t.height();var v=0;if(H()){v=17}if(s-n-v>=c){t.css({left:"0px",right:"auto"})}else{t.css({left:"auto",right:"0px"})}var p=o.touchTarget.outerHeight()-1;var g=h.height()-(i-d);var m=h.height()-g-p;if(r.windowAuto){if(g>=m){t.css("top",p+"px");B(g-p)}else{B(h.height()-g);f=o.showTarget.outerHeight();t.css("top",-f+"px")}}else{t.css("top",p+"px");B(g-p)}};var O=function(e,t){var a=e.offset();var n=a.left;var i=a.top;var s=u.width();var l=u.height();var d=u.scrollTop();var c=t.outerWidth();var f=t.height();var v=0;if(H()){v=17}if(s-n-v>=c){t.css({left:"0px",right:"auto"})}else{t.css({left:"auto",right:"0px"})}var p=o.touchTarget.outerHeight()-1;var g=h.height()-(i-d);var m=h.height()-g-p;if(r.windowAuto){if(g>=m){t.css("top",p+"px");B(g-p)}else{B(h.height()-g);f=o.showTarget.outerHeight();t.css("top",-f+"px")}}else{t.css("top",p+"px");B(g-p)}};var z=function(t,a){if(a){o.showTarget.empty()}if(t instanceof jQuery){o.showTarget.replaceWith(t)}else{o.showTarget.replaceWith(e(t))}andy.combo({combo:o,showEvent:k,showComplete:function(){if(r.showTargetType=="list"){V(o,o.showTarget)}else{t(o,o.showTarget)}}});r.showData=[];o.an_combo_bindEvent(r)};var M=function(){if(o){if(o.data("isEnable")==true){o.touchTarget.removeAttr("disabled");

o.removeClass("u-disabled")}else{o.touchTarget.attr("disabled","disabled");o.addClass("u-disabled")}}};var P=function(e,t,a){e.data("selects",r.selects);e.data("isEnable",r.isEnable);e.an_combo_creatTouch(r);e.an_combo_creatShow(r)};if(o.children().length==0){P(o,r.touchTargetType,r.showTargetType)}else{var F=andy.combo("getTouchTarget",o);if(F.is("button")){r.touchTargetType="button";if(r.inputName==""){r.inputName=r.comboId}if(r.valueForInput==null){o.append("<input type = 'hidden' name = '"+r.inputName+"'>");r.valueForInput=o.find("input")}}P(o,r.touchTargetType,r.showTargetType);o.find(".u-input").addClass("u-diseditor")}andy.combo({combo:o,showEvent:k,showComplete:function(){o.css("z-index",99999);o.showTarget.css("z-index",99999);if(r.showTargetType=="list"){V(o,o.showTarget)}else{O(o,o.showTarget)}},hiddenComplete:function(){o.css("z-index","");o.showTarget.css("z-index","")}});M();var U=o.touchTarget;if(U.is("input")){if(r.inputName==""&&U.attr("name")==undefined){r.inputName=r.comboId+"_input";U.attr("name",r.inputName)}else if(U.attr("name")==undefined){U.attr("name",r.inputName)}}o.bind(p,function(e,t){r.row=t});o.bind(y,function(e,t){z(t,true)});o.bind(T,function(e,t){});if(o.showTarget.is("ul")){}o.bind(g,function(t){if(o.touchTarget.is("input")){o.touchTarget.attr({value:r.defaultValue,idValue:"",valueData:""});o.touchTarget.val(r.defaultValue)}if(o.showTarget.is("ul")){o.showTarget.children().each(function(t,a){var n=e(a);if(n.hasClass("active")){n.removeClass("active")}})}});o.bind(w,function(e,t){o.data("isEnable",t);M()});o.an_combo_creatShow("eventBind",r);o.bind(x,function(e,t){})}},an_combo_creatTouch:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({combo:"",comboName:"combo",inputVerify:"",checked:"",selects:false,defaultValue:"下拉选择",touchTargetType:""},t);var o="EVENT_ADD_CHOOSE";var s="EVENT_CANCEL_CHOOSE";var l="EVENT_GET_VALUE";var d="EVENT_GET_ID";var c=e(this).attr("id");var f=e("#"+c);var u="";var h="";if(f.data("selects")!=undefined){r.selects=f.data("selects")}if(a!=""){if(a=="addChoose"){var v=arguments[1];f.trigger(o,v)}else if(a=="cancelChoose"){var v=arguments[1];f.trigger(s,v)}else if(a=="getValue"){}}else{var p=function(e){h.addElement(e)};var g=function(e){h.deleteElement(e)};var m=function(t){var a=e("#"+c);if(r.valueForInput==null){if(a.find("input").length==0){a.append("<input type = 'hidden' name = '"+r.inputName+"'>");r.valueForInput=a.find("input")}}var n=r.valueForInput;if(n&&n.is("input")){var i=n.attr("idValue");if(i!=undefined&&i!=""){var o=i.split(",");var s=false;for(var l=0;l<o.length;l++){if(o[l]==t.id){s=true}}if(!s){b(t)}}else{b(t)}}};var b=function(t){var a=e("#"+c);var n=andy.combo("getTouchTarget",a);var i=n.parent().find("p");var o=r.valueForInput;var s=i.attr("value");var l=o.attr("idValue");if(t.attr){t.attr=JSON.stringify(t.attr)}var d=o.attr("valueData");if(s==undefined||s==""||s==r.defaultValue){s=t.name;l=t.id;d=t.value||t.attrValue||t.attr}else{s=s+"，"+t.name;l=l+","+t.id;var f=t.value||t.attrValue||t.attr;d=d+","+f}if(r.selects==false){o.attr({idValue:t.id,valueData:t.value||t.attrValue||t.attr});i.text(t.name)}else{o.attr({idValue:l,valueData:d});i.text(s)}if(o.attr("verify")){}};var y=function(t){var a=andy.combo("getTouchTarget",e("#"+c));if(a&&a.is("input")){var n=a.attr("idValue");if(n!=undefined&&n!=""){var i=n.split(",");var r=false;for(var o=0;o<i.length;o++){if(i[o]==t.id){r=true}}if(!r){w(t)}}else{w(t)}}};var w=function(t){var a=e("#"+c);var n=andy.combo("getTouchTarget",a);var i=n.attr("value");var o=n.attr("idValue");if(t.attr){t.attr=JSON.stringify(t.attr)}var s=n.attr("valueData");if(i==undefined||i==""||i==r.defaultValue){i=t.name;o=t.id;s=t.value||t.attrValue||t.attr}else{i=i+"，"+t.name;o=o+","+t.id;var l=t.value||t.attrValue||t.attr;s=s+","+l}if(r.selects==false){n.attr({value:t.name,idValue:t.id,valueData:t.value||t.attrValue||t.attr});n.val(t.name)}else{n.attr({value:i,idValue:o,valueData:s});n.val(i)}if(n.attr("verify")){andy.inputCheck(n[0])}};var x=function(t){var a=andy.combo("getTouchTarget",e("#"+c));if(a&&a.is("input")){var n=a.attr("value");var i=a.attr("idValue");var r=a.attr("valueData");var o=n.split("，");var s=i.split(",");var l=r.split(",");for(var d=0;d<s.length;d++){if(s[d]==t.id){s.splice(d,1);o.splice(d,1);l.splice(d,1)}}a.attr("value","");a.attr("idValue","");a.attr("valueData","");var n=a.attr("value");var i=a.attr("idValue");var r=a.attr("valueData");for(var d=0;d<s.length;d++){var f=o[d];var u=s[d];var h=l[d];if(d==0){n=f;i=u;r=h}else{n=n+"，"+f;i=i+","+u;r=r+","+h}}a.attr("value",n);a.val(n);a.attr("idValue",i);a.attr("valueData",r)}};var T=function(e){if(r.touchTargetType=="input"){y(e)}else if(r.touchTargetType=="button"){m(e)}else if(r.touchTargetType=="selects"){p(e)}};var k=function(e){if(r.touchTargetType=="input"){x(e)}else if(r.touchTargetType=="button"){removeSetButton(e)}else if(r.touchTargetType=="selects"){g(e)}};if(r.touchTargetType=="input"){if(r.combo.children().length==0){var C="";if(r.combo.data("isEnable")==false){C="disabled"}if(r.checked.length>0){r.defaultValue=""}r.combo.append("<span class='u-up-menu'><input class = 'u-input u-diseditor' readonly='readonly' verify = '"+r.inputVerify+"' value = '"+r.defaultValue+"' "+C+" combo = '"+r.comboName+"'><i class='iconfont u-nd'>&#xe613;</i></span>");andy.formlayout()}}else if(r.touchTargetType=="button"){if(r.combo.children().length==0){var C="";if(r.combo.data("isEnable")==false){C="disabled"}if(r.checked.length>0){r.defaultValue=""}r.combo.append("<span class='u-but-group u-group-center'><p style='color:#000'>"+r.defaultValue+"</p><i class='iconfont'>&#xe613;</i><button type='button' class='u-but-button' combo = '"+r.comboName+"'></button></span>");r.combo.toggleClass("u-btn-eject u-group-center");andy.formlayout()}}else if(r.touchTargetType=="selects"){u=c+"_selects";if(r.combo.children().length==0){r.combo.append("<div class='u-btn-eject' style='width:100%;' combo = '"+r.comboName+"'><div class='u-btn-checkbox f-clear' id="+u+"></div></div>")}var _=r.inputName;if(_=""){_=c+"_input"}h=andy.multiSelect({parent:document.getElementById(u),dataKey:_,list:[]})}f.bind(o,function(e,t){T(t)});f.bind(s,function(e,t){k(t)});f.bind(l,function(t,a){var n=andy.combo("getTouchTarget",e("#"+c));if(n){var i=n.attr("valueData");a(i)}});f.bind(d,function(t,a){var n=andy.combo("getTouchTarget",e("#"+c));if(n){var i=n.attr("idvalue");a(i)}})}},an_combo_creatShow:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({combo:"",comboName:"combo",showTargetType:""},t);var o="EVENT_BIND";if(a!=""){if(a=="eventBind"){var s=arguments[1];e(this).trigger(o,s)}}else{if(r.showTargetType=="list"){if(r.combo.children().length==1){r.combo.append("<ul class = 'combo u-down-menu' combo = '"+r.comboName+"'></ul>")}}else if(r.showTargetType=="tree"){if(r.combo.children().length==1){r.combo.append("<div class='combo but-tree' style='height:200px;' combo ='"+r.comboName+"'></div>")}}r.combo.bind(o,function(e,t){r.combo.an_combo_bindEvent(t)})}},an_combo_bindEvent:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({combo:"",selects:false,checked:[],treeId:"",onChange:function(){},touchTargetType:"input",showTargetType:"list",showUrl:""},t);var o=r.combo.touchTarget;var s=r.combo.showTarget;if(e(this).data("selects")!=undefined){r.selects=e(this).data("selects")}if(a!=""){if(a=="setCurrentChoose"){}}else{var l=function(t,a){var n=r.combo;if(a){n.showTarget.empty()}if(t instanceof jQuery){n.showTarget=t}else{n.showTarget=e(t)}};var d=function(e){if(e.checked){r.combo.an_combo_creatTouch("addChoose",e)}else{r.combo.an_combo_creatTouch("cancelChoose",e)}};var c=function(e,t){if(e&&t&&e.checked){if(e.children&&r.selects){r.combo.an_combo_creatTouch("addChoose",e);for(var a=0;a<e.children.length;a++){c(e.children[a],t)}}else{r.combo.an_combo_creatTouch("addChoose",e)}}else if(!t){if(e.children){r.combo.an_combo_creatTouch("cancelChoose",e);for(var a=0;a<e.children.length;a++){c(e.children[a],t)}}else{r.combo.an_combo_creatTouch("cancelChoose",e)}}};var f=function(e){if(e){c(e,e.checked)}};var u=function(t,a){if(!a){return false}var n=e.fn.zTree.getZTreeObj(t);for(var i=0;i<a.length;i++){var r=n.getNodeByParam("id",a[i],null);n.checkNode(r,true,true);f(r)}};var h=function(e){var t={checked:e.hasClass("active"),value:e.attr("value"),id:e.attr("listId"),name:e.text()};return t};var v=function(){var t=r.checked.length;s.children().each(function(a,n){var i=e(n);if(!i.attr("listId")){i.attr("listId",r.combo.attr("id")+"_"+a)}if(t>0){for(var o=0;o<t;o++){if(i.attr("listId")==String(r.checked[o])){i.addClass("active");var l=h(i);d(l)}}}i.unbind("click");i.on("click",function(t){var a=e(t.target);if(a.is("li")==false){a=a.closest("li")}if(!r.selects){s.children().each(function(t,a){e(a).removeClass("active")})}a.toggleClass("active");var n=h(a);i.comboData=n;r.onChange(i);d(n);e("#"+r.comboId).trigger(andy.COMBO_CHOOSE_LISET,i);if(r.selects==false){andy.combo("hiddenTarget",r.combo)}})})};var p=function(t,a,n,i){var o=t;r.selects=i.selects;var s=i.checked;var d=r.combo;var c={treeObj:null,callback:{onCheck:function(e,t,a){f(a);r.onChange(a)}},check:{enable:true,autoCheckTrigger:true,chkStyle:"checkbox",chkboxType:{Y:"s",N:"s"}},data:{simpleData:{enable:true}}};if(r.treeCheckBoxType!={}){c.check.chkboxType=r.treeCheckBoxType}if(r.selects==false){c.check={enable:true,radioType:"all",chkStyle:"radio"}}if(a){c=e.extend(c,a)}d.showTarget.append("<div class='g-h-max'><ul id='"+o+"' class='ztree'></ul></div>");var h="";if(n){e.fn.zTree.init(e("#"+o),c,n);h=e("#"+o);u(o,s);l(d.showTarget)}else if(i&&i.url){andy.loaddata(i.url,function(t){t=andy.stringToJson(t);e.fn.zTree.init(e("#"+o),c,t);h=e("#"+o);u(o,s);l(d.showTarget)})}};var g=function(e){if(r.showTargetType=="list"){var t="";for(var a=0;a<e.length;a++){var n=e[a];var i="";var o="";var l="";var d="";if(a==0){i="first"}if(n.value){o="value = "+n.value}else if(n.attrValue){d="attrValue = "+n.attrValue}else if(n.attr){l="attrStr = "+n.attr}var c="<li class = '"+i+"' "+o+" "+l+" "+d+" listId = '"+n.id+"' ><a>"+n.name+"</a></li>";t+=c}s.append(t);v()}else if(r.showTargetType=="tree"){if(r.treeId==""){r.treeId="treeId_"+andy.getRandom(1e4)}p(r.treeId,null,e,r)}};if(r.showUrl!=""){andy.loaddata(r.showUrl,function(e){g(e)})}else if(r.showData.length>0){if(typeof r.showData=="string"){r.showData=andy.stringToJson(r.showData)}g(r.showData)}else{if(r.showTargetType=="list"){v()}}r.combo.bind("EVENT_CHOOSE",function(t,a){s.children().each(function(t,n){var i=e(n);for(var o=0;o<a.choose.length;o++){if(parseInt(i.attr("listId"))==a.choose[o]){if(!r.selects){s.children().each(function(t,a){e(a).removeClass("active")})}i.addClass("active");var l=h(i);d(l)}}})})}}})})(jQuery);(function(e){e.fn.extend({an_spinner:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({increment:1,min:0,max:99999,inputName:"",value:1,onClick:function(){}},t);var o=e(this);if(o.is("input")){var s=o.attr("id");o.removeAttr("id","");o.removeAttr("an-spinner","");if(!s){s="spinner_"+andy.getRandom(1e4)}var l=o.attr("style");if(o.attr("name")){r.inputName=o.attr("name");o.removeAttr("name")}if(o.attr("value")){r.value=o.attr("value");o.removeAttr("value")}var d=o.attr("options");o.css("display","none");var c="<span class='u-but-group u-group-left'><i class='iconfont'>&#xe670;</i><button class='u-but-button' type='button' sub></button></span>";var f="<span class='u-but-group u-group-right'><i class='iconfont'>&#xe66f;</i><button class='u-but-button' type='button' add></button></span>";var u="<input type='text' class='u-input u-group-center' name = '"+r.inputName+"' style='text-align:center; width:0px; text-indent:0' value='"+r.value+"' val>";var h="<div class='u-group' id = '"+s+"' style = '"+l+"' options = '"+d+"' an-spinner>"+c+u+f+"</div>";o.before(h);o=e("#"+s);andy.layout(o.parent())}var v=o.find("[sub]");var p=o.find("[val]");var g=o.find("[add]");var m="EVENT_VALUE";var b=o.attr("options");if(b){b=b.split(",");for(var n=0;n<b.length;n++){var y=b[n].split(":");var w=y[0];var x=y[1];if(w=="increment"){r.increment=parseInt(x)}else if(w=="min"){r.min=parseInt(x)}else if(w=="max"){r.max=parseInt(x)}}}if(a!=""){if(a=="getValue"){var T=arguments[1];o.trigger(m,T)}}else{o.bind(m,function(e,t){t(p.val())});v.click(function(e){var t=parseInt(p.val());if(t>r.min){t-=r.increment;p.val(t);p.attr("value",t)}});g.click(function(e){var t=parseInt(p.val());if(t<r.max){t+=r.increment;p.val(t);p.attr("value",t)}})}}})})(jQuery);(function(e){var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks){for(var a=t.length;a;){e.event.fixHooks[t[--a]]=e.event.mouseHooks}}e.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=t.length;e;){this.addEventListener(t[--e],n,false)}}else{this.onmousewheel=n}},teardown:function(){if(this.removeEventListener){for(var e=t.length;e;){this.removeEventListener(t[--e],n,false)}}else{this.onmousewheel=null}}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function n(t){var a=t||window.event,n=[].slice.call(arguments,1),i=0,r=true,o=0,s=0;t=e.event.fix(a);t.type="mousewheel";if(a.wheelDelta){i=a.wheelDelta/120}if(a.detail){i=-a.detail/3}s=i;if(a.axis!==undefined&&a.axis===a.HORIZONTAL_AXIS){s=0;o=-1*i}if(a.wheelDeltaY!==undefined){s=a.wheelDeltaY/120}if(a.wheelDeltaX!==undefined){o=-1*a.wheelDeltaX/120}n.unshift(t,i,o,s);return(e.event.dispatch||e.event.handle).apply(this,n)}})(jQuery);(function(e){e.findOutElement=function(e,t,a,n,i){if(e){var r,o=e.ownerDocument;while(e&&e!==o){if(e.getAttribute){if(n){r=e.getAttribute(n);if(r===""||r){return}}if(i){r=e.getAttribute(i);if(r===""||r){return}}r=e.getAttribute(t);if(r===""||r){if(a!==undefined){if(r.indexOf(a)>-1){return e}}else{return e}}}e=e.parentNode}}};var t=[],a=0,n,i=false,r={},o={},s=new Date,l;var d=function(e){e.className=e.className+" u-global-drag"};var c=function(e){e.className=e.className.replace(" u-global-drag","")};var f=function(a){var s;if(!i&&t.length>0){for(s=t.length-1;s>=0;s--){i=e.arrayFunCall(t[s].onDragCheck,{event:a,data:t[s].data});if(i){n=t[s];break}}if(i){d(n.element||document.body);r.x=o.x=a.clientX;r.y=o.y=a.clientY;if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}}}};var u=function(a){var r,d,c={};if(t.length>0){if(i&&n){var f=new Date-s;if(f>n.restrictedMoveTime){s=f;if(l===undefined){l=true;if(n.onDragBefore.length>0){l=e.arrayFunCall(n.onDragBefore,[a])}}c.x=a.clientX-o.x;c.y=a.clientY-o.y;o.x=a.clientX;o.y=a.clientY;if(l){if(n.lockRect){if(a.clientX>n.lockRect.x+n.lockRect.w){c.x=0;o.x=n.lockRect.x+n.lockRect.w}if(a.clientX<n.lockRect.x){c.x=0;o.x=n.lockRect.x}if(a.clientY>n.lockRect.y+n.lockRect.h){c.y=0;o.y=n.lockRect.y+n.lockRect.h}if(a.client<n.lockRect.y){c.y=0;o.x=n.lockRect.y}}if(n.lockX){c.y=0}if(n.lockY){c.x=0}e.arrayFunCall(n.onDragOn,{offset:c,data:n.data,event:a})}}return false}else{for(r=t.length-1;r>=0;r--){d=e.arrayFunCall(t[r].onMoveCheck,{event:a,data:t[r].data});if(d){break}}}}};var h=function(t){if(i&&n){var a=e.arrayFunCall(n.onDragEnd,{event:t,data:n.data});c(n.element||document.body);i=false;l=undefined;n=undefined;return a}};var v=function(){$(document).on("mousedown",f);$(document).on("mousemove",u);$(document).on("mouseup",h)};var p=function(){$(document).off("mousedown",f);$(document).off("mousemove",u);$(document).off("mouseup",h)};e.drag=function(n){var i={lockX:false,lockY:false,lockRect:undefined,restrictedMoveTime:12,data:{},onMoveCheck:[],onDragCheck:[],onDragBefore:[],onDragOn:[],onDragBeforeEnd:[],onDragEnd:[]};var r={};var o=e.extend(i,n);r.addEventCall=function(e,t){if(o[e]){o[e].push(t)}};r.getData=function(){return o.data};r.destroy=function(){t.splice(o.dragIndex,1);if(t.length===0){p()}};if(t.length===0){v()}o.dragIndex=a;a++;t.push(o);return r};var g=function(e){if(typeof e==="string"){}if(typeof e==="object"){e.setAttribute("andyDrag","true")}};var m=function(){};e.dragElement=function(t){var a,n,i,r,o,s;var l=function(t,a){a=a||e.findOutElement(t.event.target,n.dragName,"true",undefined,n.notDragEl);if(a){return true}return false};var d=function(t){var a=e.findOutElement(t.event.target,n.dragName,"true",undefined,n.notDragEl);if(a&&l(t,a)){i=a;return true}else{i=undefined;return false}};var c=function(e){if(n.dragHelp){}else if(n.dragCopyEl){r=i.cloneNode(true);r.style.position="absolute";r.style.left=i.offsetLeft+"px";r.style.top=i.offsetTop+"px";i.parentNode.appendChild(r)}return n.onDragBeforeElement(i,e,r)&&true};var f=function(e){var t,a,l,d,c,f;d=function(i){c=i.offsetLeft-parseInt($(i).css("margin-left"),10)+e.offset.x;f=i.offsetTop-parseInt($(i).css("margin-top"),10)+e.offset.y;if(n.lockInParent){a=i.parentNode.offsetWidth;l=i.parentNode.offsetHeight;t(i)}e.left=c;e.top=f;i.style.left=c+"px";i.style.top=f+"px"};t=function(e){var t=parseInt($(e).css("margin-left"),10),n=parseInt($(e).css("margin-top"),10);if(o===undefined){o=a-$(e).outerWidth()-t-t}if(s===undefined){s=l-$(e).outerHeight()-n}c=c<0?0:c;c=c>o?o:c;f=f<0?0:f;f=f>s?s:f};if(n.dragSelf){if(i.getAttribute("lockx")==="true"){e.offset.y=0}if(i.getAttribute("locky")==="true"){e.offset.x=0}d(i)}if(r){d(r)}n.onDragElement(i,e,r)};var u=function(e){n.onDragEndElement(i,e,r);if(r&&r.parentNode){r.parentNode.removeChild(r)}i=undefined;o=undefined;s=undefined;return false};var h={element:document.body,lockInParent:true,dragSelf:true,dragHelp:false,dragCopyEl:false,dragName:"andyDrag",onDragCheck:[d],onMoveCheck:[l],onDragBefore:[c],onDragOn:[f],onDragEnd:[u],posCheck:function(){},onDragElement:function(){return true},onDragEndElement:function(){return true},onDragBeforeElement:function(){return true}};n=e.extend(h,t);a=e.drag(n);return a};e.dragElement()})(andy);(function(e){var t='<div  class="multi-select-box" style="position:relative;width: 100%;height:100%">'+'{{each list as value i}}<span multiSelect="true" index="{{i+1}}" data-id="{{list[i].val||list[i].id||list[i].text}}" class="option-block" nametext="{{list[i].text||list[i].name}}" ><span class="indexnum">{{i+1}}.</span> {{list[i].text||list[i].name}}<i notdrag="true" class="iconfont">&#xe62d;</i></span>{{/each}}'+'</div><input type="hidden" name="{{dataKey}}">';var a=function(e){var t=[];var a=e.next("input")[0]||e.find("input")[0];e.find("[multiselect]").each(function(e,a){a.setAttribute("index",e+1);$(a).find(".indexnum").html(e+1+".");t.push(a.getAttribute("data-id"))});if(a){a.value=t.join(",")}};var n=function(e,t){var a=e.next(),n=t.prev();if(a[0]===t[0]){t.insertBefore(e)}else{t.insertBefore(a);e.insertAfter(n)}};var i=function(){var t,i,r,o,s,l,d,c;if(e.dragElement){e.dragElement({dragName:"multiSelect",dragCopyEl:true,dragSelf:false,notDragEl:"notdrag",onDragBeforeElement:function(e,a,n){e.style.visibility="hidden";n.style.opacity=.5;n.removeAttribute("multiselect");i=$(e.parentNode).find("[multiselect]").length;t=parseInt(e.parentNode.offsetWidth/e.offsetWidth,10);d=parseInt(e.getAttribute("index"),10);c=$(e).parent().children();return true},onDragElement:function(e,t,a){var i=0,s,l,f;for(i;i<c.length-1;i++){s={};l=i;f=c[i];s.x=(f.offsetLeft+f.offsetLeft+f.offsetWidth)/2;s.y=(f.offsetTop+f.offsetTop+f.offsetHeight)/2;if(f.className===""){return}if(s.x>a.offsetLeft&&s.x<a.offsetLeft+a.offsetWidth){if(s.y>a.offsetTop&&s.y<a.offsetTop+a.offsetHeight){r=l+1;if(!o&&r!==d||o&&o!==r){o=r;n($(f),$(e));break}}}}},onDragEndElement:function(e,t,n){s=undefined;l=undefined;o=undefined;a($(e).parent());e.style.visibility="visible"}})}else{throw"需要在这之前加载拖动drag.js"}};e.multiSelect=function(e){var n={},i=$(e.parent);var r=i.find(".multi-select-box");i.css("z-index",1);if(r.length>0){i.empty()}if(e.list){var o=template.compile(t);var s=o(e);i.append(s);i.find(".multi-select-box").addClass("f-clear")}a(i);i.find("i").mousedown(function(t){var n,r=$(this).parent().parent();if(e.onDelete){n=parseInt($(this).parent().attr("index"),10);e.onDelete(n)}a(r);$(this).parent().remove();i.find(".multi-select-box").height("auto").css({width:i.width(),height:i.height()||23})});n.setEnable=function(e){if(!e){i.append("<div multiSelectMask style='position: absolute;width: 100%; height: auto;z-index: 2;background: #fff; opacity: 0.5; top: 0px;'></div>");i.find("[multiSelectMask]").height(i.height())}else{i.find("[multiSelectMask]").remove()}};n.addElement=function(t){e.list.push(t);var a='<span multiSelect="true" index="'+e.list.length+'" data-id="'+(t.val||t.id||t.text)+'" class="option-block" nametext="'+(t.text||t.name)+'" ><span class="indexnum">'+e.list.length+".</span> "+(t.text||t.name)+'<i notdrag="true" class="iconfont">&#xe62d;</i></span>';i.find(".multi-select-box").append(a)};n.deleteElement=function(e){i.find("[data-id="+e.id+"]").remove();a(i)};return n};i()})(andy);(function(e){e.fn.extend({an_related:function(){var t={};var a="";for(var n=0;n<arguments.length;n++){var i=arguments[0];if(typeof i=="object"){t=i}else if(typeof i=="string"){a=i}}var r=e.extend({relatedId:"",showUrl:"",item:[],checked:[],row:5,inputName:"",value:""},t);var o=e(this);var s="";if(o.is("input")){var l=o.attr("id");o.removeAttr("id","");o.removeAttr("an-related","");if(!l){l="related_"+andy.getRandom(1e4)}var d="";if(o.attr("style")){d=o.attr("style");o.removeAttr("style","")}if(o.attr("name")){r.inputName=o.attr("name");o.removeAttr("name")}if(o.attr("value")){r.value=o.attr("value");o.removeAttr("value")}var c="u-l-select";if(o.attr("class")){c=o.attr("class");o.attr("class","")}var f=o.attr("options");f="options = "+f;o.removeAttr("options");o.css("display","none");var u="<input type = 'hidden' name = '"+r.inputName+"' value='"+r.value+"' val>";var h="<div class='"+c+"' id = '"+l+"' style = '"+d+"' "+f+" an-related>"+u+"</div>";o.before(h);o.remove();o=e("#"+l);andy.layout(o.parent())}if(r.relatedId==""){r.relatedId=o.attr("id")}if(r.relatedId==undefined){r.relatedId="as_"+andy.getRandom(1e4);o.attr("id",r.relatedId)}o=e("#"+r.relatedId);o.find("input").each(function(t,a){var n=e(a);if(n.attr("type")=="hidden"){s=n;r.inputName=n.attr("name")}});var v=o.attr("options");if(v){v="{"+v+"}";v=andy.stringToJson(v);for(var p in v){if(p=="item"){var g=v[p].split(",");r.item=g}else if(p=="checked"){var g=v[p].split(",");r.checked=g}else{r[p]=v[p]}}}var m=r.item.length;var b="";if(m>0){if(o.find("input").length<m){for(var n=0;n<m;n++){var y=Math.floor(o.innerWidth()/m)/2;var w="g-combo u-group-center";var x=true;if(n==0){w="g-combo u-group-left"}else if(n==m-1){w="g-combo u-group-right"}if(n>0&&r.checked.length==0){x=false}var T="options = defaultValue:'"+r.item[n]+"',isEnable:'"+x+"',row:'"+r.row+"'";b+="<input class = '"+w+"' style = 'width:"+y+"px' name = 'input_name' "+T+">"}o.prepend(b)}}var k="EVENT_VALUE";if(a!=""){if(a=="getValue"){var C=arguments[1];o.trigger(k,C)}}else{var _="";var s="";var m=0;o.find("input").each(function(t,a){var n=e(a);if(n.attr("type")=="hidden"){s=n}});var $=function(e,t){for(var a=0;a<t.length;a++){if(t[a].id==e){_=t[a].children}else if(t[a].children){$(e,t[a].children)}}if(_!=""){return _}};var E=function(e,t,a){for(var n=0;n<t.length;n++){if(t[n].id==e){t[n].children=a}else if(t[n].children){E(e,t[n].children,a)}}};var I=function(e,t){var a=t.find("ul");a.empty();for(var n=0;n<e.length;n++){var i=e[n];var r="";if(n==0){r="first"}var o="<li class = '"+r+"' value = '"+i.value+"' listId = '"+i.id+"' ><a>"+i.name+"</a></li>";a.append(o)}return a};var S=function(e,t){var a=s.attr("idValue");var n=s.attr("valueData");if(!a){var i=" ";for(var r=0;r<m-1;r++){i+=", "}s.attr("idValue",i);a=s.attr("idValue")}var o=a.split(",");o[t]=e.attr("listid");s.attr("idValue",o);if(!n){var i=" ";for(var r=0;r<m-1;r++){i+=", "}s.attr("valueData",i);n=s.attr("valueData")}var l=n.split(",");l[t]=e.attr("value");s.attr("valueData",l)};var D=function(t,a){for(var n=t+1;n<a.length;n++){var i=e("#"+a[n]);i.an_combo("setDefault");i.an_combo("isEnable",false)}};andy.loaddata(r.showUrl,function(t){var a=t;o.find("input").each(function(t,n){var i=e(n);if(i.attr("type")!="hidden"){var o="";m+=1;if(t==0){o=r.showUrl}if(r.checked.length>0){var l=[];if(t==0){l=a}else{l=$(r.checked[t-1],a)}if(l){i.an_combo({row:r.row,checked:[r.checked[t]],showData:l});if(s){var d=s.attr("idValue");if(!d){var c=" ";for(var t=0;t<m-1;t++){c+=", "}s.attr("idValue",c);d=s.attr("idValue");s.attr("valueData",c)}d=d.split(",");var f=s.attr("valueData").split(",");d[t]=r.checked[t];var u=function(){var e=r.checked[t];var a="";for(var n=0;n<l.length;n++){var i=l[n];if(e==i.id){a=i.value}}return a};f[t]=u();s.attr("idValue",d);s.attr("valueData",f)}}}else{i.an_combo({row:r.row,showUrl:o})}}});var n=[];o.find("[an-combo = an-combo]").each(function(t,i){var r=e(i).attr("id");var o=e("#"+r);andy.inputLayout(o);n.push(r);o.bind(andy.COMBO_CHOOSE_LISET,function(i,r){S(e(r),t);if(n[t+1]){var o=e("#"+n[t+1]);var s=e(r).attr("listId");var l=$(s,a);_="";if(typeof l=="object"){if(l.length==0){D(t,n);return false}var d=I(l,o).clone();for(var c=t+1;c<n.length;c++){var f=e("#"+n[c]);f.an_combo("setDefault")}o.an_combo("setShowTarget",d);o.an_combo("isEnable",true)}else if(typeof l=="string"){andy.loaddata(l,function(i,r){if(!i||i.length==0){D(t,n);return false}E(s,a,i);var l=I(i,o).clone();for(var d=t+1;d<n.length;d++){var c=e("#"+n[d]);c.an_combo("setDefault")}o.an_combo("setShowTarget",l);o.an_combo("isEnable",true)})}else if(!l){D(t,n)}}})})})}}})})(jQuery);